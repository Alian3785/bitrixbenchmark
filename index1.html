<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–î–∏–Ω–æ-–ë–∞—Ç—Ç–ª –ö–≤–∏–∑ ‚Äî –¥–µ—Ç—Å–∫–∞—è –∏–≥—Ä–∞</title>
  <style>
    :root{
      --bg1:#081024;
      --bg2:#120b2a;
      --card:#0e1b3a;
      --card2:#0a1633;
      --text:#eaf2ff;
      --muted:#b9c8ff;
      --accent:#7c5cff;
      --accent2:#2ee6a6;
      --warn:#ffcc66;
      --bad:#ff5c7a;
      --good:#2ee6a6;
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 18px;
      --btnRadius: 16px;
      --stroke: rgba(255,255,255,.12);
      --stroke2: rgba(124,92,255,.32);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(124,92,255,.35), transparent 60%),
        radial-gradient(900px 600px at 85% 15%, rgba(46,230,166,.22), transparent 60%),
        radial-gradient(900px 600px at 60% 95%, rgba(255,204,102,.14), transparent 60%),
        linear-gradient(140deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* Soft star field */
    .stars{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.35;
      background-image:
        radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,.9), transparent 60%),
        radial-gradient(1px 1px at 30% 80%, rgba(255,255,255,.8), transparent 60%),
        radial-gradient(1px 1px at 60% 40%, rgba(255,255,255,.8), transparent 60%),
        radial-gradient(1px 1px at 80% 70%, rgba(255,255,255,.7), transparent 60%),
        radial-gradient(1px 1px at 90% 30%, rgba(255,255,255,.8), transparent 60%),
        radial-gradient(1px 1px at 20% 55%, rgba(255,255,255,.7), transparent 60%),
        radial-gradient(1px 1px at 45% 15%, rgba(255,255,255,.9), transparent 60%),
        radial-gradient(1px 1px at 70% 90%, rgba(255,255,255,.6), transparent 60%);
      mix-blend-mode: screen;
      filter: blur(.2px);
    }

    .wrap{
      max-width: 1150px;
      margin: 0 auto;
      padding: 24px 16px 40px;
      position:relative;
      z-index:1;
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom: 18px;
    }

    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }

    .logo{
      width:52px; height:52px;
      border-radius: 16px;
      background:
        radial-gradient(40px 40px at 30% 30%, rgba(255,255,255,.25), transparent 60%),
        linear-gradient(135deg, rgba(124,92,255,.95), rgba(46,230,166,.7));
      box-shadow: 0 18px 40px rgba(124,92,255,.18);
      border: 1px solid rgba(255,255,255,.18);
      display:grid;
      place-items:center;
      position:relative;
      overflow:hidden;
    }
    .logo:after{
      content:"";
      position:absolute; inset:-60px -60px auto auto;
      width:120px; height:120px;
      background: radial-gradient(circle, rgba(255,255,255,.35), transparent 55%);
      transform: rotate(25deg);
      opacity:.8;
    }
    .logo span{
      font-size: 26px;
      position:relative;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.3));
    }

    h1{
      font-size: clamp(20px, 3vw, 30px);
      line-height: 1.15;
      margin:0;
      letter-spacing: .2px;
    }
    .subtitle{
      margin-top:4px;
      color: var(--muted);
      font-size: 13.5px;
    }

    .pill{
      display:flex;
      gap:10px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(10,22,51,.45);
      backdrop-filter: blur(8px);
      box-shadow: 0 16px 40px rgba(0,0,0,.22);
      white-space:nowrap;
    }
    .pill .k{
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(255,255,255,.75);
    }
    .pill .v{
      font-weight: 700;
      letter-spacing:.2px;
    }

    main{
      display:grid;
      grid-template-columns: 1fr 240px;
      gap: 16px;
      align-items:start;
    }
    @media (max-width: 980px){
      main{ grid-template-columns: 1fr; }
      .ladder{ order: 2; }
    }

    .panel{
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(14,27,58,.84), rgba(10,22,51,.72));
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .panel:before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(800px 500px at 20% 0%, rgba(124,92,255,.14), transparent 50%),
        radial-gradient(600px 420px at 90% 30%, rgba(46,230,166,.12), transparent 55%);
      pointer-events:none;
    }

    .panelHead{
      position:relative;
      padding: 16px 16px 12px;
      border-bottom: 1px solid rgba(255,255,255,.12);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
    }
    .qTitle{
      font-weight: 800;
      letter-spacing:.2px;
      font-size: 15px;
      color: rgba(255,255,255,.9);
    }
    .qText{
      margin-top:6px;
      font-size: clamp(16px, 2.2vw, 22px);
      line-height:1.2;
    }
    .badge{
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(124,92,255,.35);
      background: rgba(124,92,255,.14);
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(255,255,255,.86);
      white-space:nowrap;
    }

    .panelBody{
      position:relative;
      padding: 16px;
    }

    .dinos{
      display:grid;
      grid-template-columns: 1fr 60px 1fr;
      gap: 12px;
      align-items:stretch;
    }
    @media (max-width: 720px){
      .dinos{ grid-template-columns: 1fr; }
      .vs{ display:none; }
    }

    .vs{
      display:grid;
      place-items:center;
      font-weight: 900;
      font-size: 22px;
      color: rgba(255,255,255,.85);
      text-shadow: 0 8px 20px rgba(0,0,0,.35);
      border-radius: 18px;
      border: 1px dashed rgba(255,255,255,.18);
      background: rgba(6,12,30,.35);
      position:relative;
      overflow:hidden;
    }
    .vs:before{
      content:"";
      position:absolute; inset:-40px;
      background: radial-gradient(circle, rgba(255,255,255,.12), transparent 60%);
      transform: rotate(25deg);
    }

    .dinoCard{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(8,16,36,.55), rgba(8,16,36,.22));
      overflow:hidden;
      position:relative;
      min-height: 200px;
    }
    .dinoCard .top{
      display:flex;
      align-items:center;
      gap: 14px;
      padding: 14px 14px 10px;
    }

    .dinoArt{
      width: 86px;
      height: 86px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.16);
      background:
        radial-gradient(60px 60px at 30% 30%, rgba(255,255,255,.22), transparent 60%),
        linear-gradient(135deg, rgba(124,92,255,.22), rgba(46,230,166,.16));
      box-shadow: 0 18px 40px rgba(0,0,0,.22);
      display:grid;
      place-items:center;
      overflow:hidden;
      flex:0 0 auto;
      position:relative;
    }

    .dinoArt svg{ width: 82px; height: 82px; }
    .dinoArt img.dinoImg{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      opacity:0;
      transform: scale(1.02);
      transition: opacity .25s ease, transform .25s ease;
    }
    .dinoArt.hasImg img.dinoImg{ opacity:1; transform: scale(1.0); }
    .dinoArt.hasImg svg{ opacity:0; }
    .dinoArt .shine{
      position:absolute; inset:-50px -50px auto auto;
      width: 120px; height: 120px;
      background: radial-gradient(circle, rgba(255,255,255,.35), transparent 60%);
      transform: rotate(25deg);
      opacity:.7;
      pointer-events:none;
    }

    .zoomBtn{
      position:absolute;
      right:8px;
      bottom:8px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(6,12,30,.30);
      color: rgba(255,255,255,.92);
      border-radius: 14px;
      padding: 8px 10px;
      cursor:pointer;
      font-weight: 900;
      z-index:2;
    }
    .zoomBtn:hover{ border-color: rgba(124,92,255,.55); }

    .dinoMeta .name{
      font-weight: 900;
      font-size: 18px;
      letter-spacing:.2px;
    }
    .dinoMeta .when{
      margin-top: 4px;
      color: rgba(255,255,255,.78);
      font-size: 12.5px;
      line-height:1.2;
    }
    .dinoMeta .when span{
      color: rgba(255,255,255,.92);
      font-weight: 700;
    }
    .dinoCard .bottom{
      padding: 0 14px 14px;
      color: rgba(255,255,255,.72);
      font-size: 12.5px;
      line-height:1.25;
    }
    .dinoCard .bio{
      margin-top: 10px;
      color: rgba(255,255,255,.80);
      font-size: 13px;
      line-height: 1.25;
    }
    .dinoCard .bottom .tag{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(6,12,30,.28);
      margin-right: 8px;
      margin-top: 8px;
      white-space:nowrap;
    }
    .dinoCard .bottom .dot{
      width:10px;height:10px;border-radius:999px; display:inline-block;
      background: rgba(46,230,166,.8);
      box-shadow: 0 10px 20px rgba(46,230,166,.18);
    }

    .answers{
      margin-top: 14px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 720px){
      .answers{ grid-template-columns: 1fr; }
    }

    .btn{
      appearance:none;
      border: 1px solid rgba(255,255,255,.16);
      background: linear-gradient(180deg, rgba(14,27,58,.65), rgba(10,22,51,.35));
      color: var(--text);
      border-radius: var(--btnRadius);
      padding: 14px 14px;
      cursor:pointer;
      display:flex;
      gap: 12px;
      align-items:flex-start;
      text-align:left;
      transition: transform .08s ease, border-color .18s ease, background .18s ease, filter .18s ease;
      box-shadow: 0 14px 30px rgba(0,0,0,.22);
      position:relative;
      overflow:hidden;
      min-height: 62px;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(124,92,255,.5); filter: brightness(1.04); }
    .btn:active{ transform: translateY(0px) scale(.99); }
    .btn[disabled]{ opacity:.75; cursor:not-allowed; filter: saturate(.75); }
    .btn .key{
      font-family: var(--mono);
      font-weight: 900;
      letter-spacing:.7px;
      padding: 7px 9px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(6,12,30,.40);
      min-width: 38px;
      text-align:center;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
    }
    .btn .txt{
      font-size: 14px;
      line-height: 1.15;
      color: rgba(255,255,255,.92);
      font-weight: 700;
    }
    .btn .sub{
      margin-top: 5px;
      font-size: 12.5px;
      color: rgba(255,255,255,.72);
      font-weight: 600;
    }

    .btn.good{ border-color: rgba(46,230,166,.55); background: linear-gradient(180deg, rgba(46,230,166,.18), rgba(10,22,51,.35)); }
    .btn.bad{ border-color: rgba(255,92,122,.55); background: linear-gradient(180deg, rgba(255,92,122,.16), rgba(10,22,51,.35)); }

    .feedback{
      margin-top: 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(6,12,30,.32);
      padding: 14px;
      display:none;
      box-shadow: 0 14px 30px rgba(0,0,0,.18);
    }
    .feedback.show{ display:block; }
    .feedback .line1{
      display:flex; align-items:center; gap:10px;
      font-weight: 900;
      font-size: 16px;
    }
    .feedback .bubble{
      width: 30px; height: 30px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      box-shadow: 0 10px 22px rgba(0,0,0,.18);
    }
    .feedback .bubble.good{ border-color: rgba(46,230,166,.55); background: rgba(46,230,166,.14); }
    .feedback .bubble.bad{ border-color: rgba(255,92,122,.55); background: rgba(255,92,122,.14); }
    .feedback .explain{ margin-top: 8px; color: rgba(255,255,255,.78); line-height:1.35; font-size: 13.5px; }
    .feedback .correct{
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.82);
      font-size: 13px;
    }

    .actions{
      margin-top: 14px;
      display:flex;
      gap: 12px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .primary{
      background: linear-gradient(135deg, rgba(124,92,255,.95), rgba(46,230,166,.72));
      border-color: rgba(255,255,255,.18);
      font-weight: 900;
    }
    .ghost{
      background: rgba(6,12,30,.25);
    }

    .ladder{
      padding: 14px;
    }
    .ladder h2{
      margin: 2px 0 10px;
      font-size: 14px;
      letter-spacing:.2px;
      color: rgba(255,255,255,.86);
    }
    .steps{
      list-style:none;
      margin:0;
      padding:0;
      display:flex;
      flex-direction:column-reverse;
      gap: 8px;
    }
    .step{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 10px 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(6,12,30,.22);
      font-size: 13px;
      color: rgba(255,255,255,.80);
    }
    .step .n{
      font-family: var(--mono);
      opacity:.9;
    }
    .step .egg{
      width: 12px; height: 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.25);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.25);
    }
    .step.active{
      border-color: rgba(124,92,255,.55);
      background: rgba(124,92,255,.14);
      color: rgba(255,255,255,.92);
    }
    .step.done{
      border-color: rgba(46,230,166,.35);
      background: rgba(46,230,166,.08);
      color: rgba(255,255,255,.86);
    }
    .step.active .egg{ background: rgba(255,204,102,.85); }

    /* Screens */
    .screen{
      padding: 20px;
      text-align:center;
    }
    .bigTitle{
      font-weight: 1000;
      letter-spacing: .3px;
      font-size: clamp(26px, 4vw, 40px);
      margin: 6px 0 10px;
    }
    .bigText{
      color: rgba(255,255,255,.78);
      line-height:1.35;
      max-width: 720px;
      margin: 0 auto;
    }
    .startRow{
      margin-top: 16px;
      display:flex;
      gap: 12px;
      justify-content:center;
      flex-wrap:wrap;
    }

    .summary{
      margin-top: 14px;
      text-align:left;
      max-width: 900px;
      margin-left:auto;
      margin-right:auto;
      display:grid;
      gap: 10px;
    }
    details{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(6,12,30,.22);
      padding: 10px 12px;
    }
    details summary{
      cursor:pointer;
      font-weight: 900;
      color: rgba(255,255,255,.86);
      outline:none;
    }
    .reviewItem{
      margin-top: 10px;
      color: rgba(255,255,255,.78);
      font-size: 13.5px;
      line-height:1.35;
    }
    .reviewItem b{ color: rgba(255,255,255,.92); }

    .hint{
      margin-top: 10px;
      font-size: 12.5px;
      color: rgba(255,255,255,.72);
    }
    .kbd{
      font-family: var(--mono);
      padding: 2px 6px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
    }

    /* Tiny confetti */
    .confetti{
      position: fixed;
      inset: 0;
      pointer-events:none;
      overflow:hidden;
      display:none;
      z-index: 4;
    }
    .confetti.show{ display:block; }
    .piece{
      position:absolute;
      width: 8px;
      height: 14px;
      border-radius: 3px;
      opacity:.9;
      animation: fall 1.15s ease-in forwards;
      filter: drop-shadow(0 8px 16px rgba(0,0,0,.2));
    }
    @keyframes fall{
      0%{ transform: translateY(-20px) rotate(0deg); }
      100%{ transform: translateY(110vh) rotate(360deg); opacity:.0; }
    }

    /* Lightbox (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏) */
    .lightbox{
      position: fixed;
      inset: 0;
      display:none;
      place-items:center;
      background: rgba(0,0,0,.62);
      backdrop-filter: blur(10px);
      z-index: 10;
      padding: 18px;
    }
    .lightbox.show{ display:grid; }
    .lightboxCard{
      width: min(980px, 96vw);
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.18);
      background: linear-gradient(180deg, rgba(14,27,58,.92), rgba(10,22,51,.82));
      box-shadow: 0 30px 90px rgba(0,0,0,.55);
      overflow:hidden;
      transform: translateY(8px) scale(.985);
      opacity: 0;
      animation: pop .16s ease forwards;
    }
    @keyframes pop{
      to{ transform: translateY(0px) scale(1); opacity: 1; }
    }
    .lightboxTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,.12);
    }
    .lightboxTitle{
      font-weight: 900;
      color: rgba(255,255,255,.92);
      font-size: 14px;
      letter-spacing:.2px;
    }
    .lightboxClose{
      appearance:none;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(6,12,30,.30);
      color: rgba(255,255,255,.92);
      border-radius: 14px;
      padding: 10px 12px;
      cursor:pointer;
      font-weight: 900;
      display:flex;
      gap: 8px;
      align-items:center;
    }
    .lightboxClose:hover{ border-color: rgba(124,92,255,.55); }
    .lightboxBody{
      padding: 12px;
      display:grid;
      gap: 10px;
    }
    .lightboxImgWrap{
      border-radius: 18px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      max-height: 72vh;
      display:grid;
      place-items:center;
    }
    .lightboxImgWrap img{
      width: 100%;
      height: auto;
      max-height: 72vh;
      object-fit: contain;
      display:block;
    }
    .lightboxMeta{
      display:flex;
      justify-content:space-between;
      gap: 12px;
      flex-wrap:wrap;
      color: rgba(255,255,255,.76);
      font-size: 12.5px;
    }
    .lightboxMeta a{
      color: rgba(46,230,166,.95);
      text-decoration: none;
      border-bottom: 1px dotted rgba(46,230,166,.6);
    }
    .lightboxMeta a:hover{ filter: brightness(1.08); }

    /* ====== INTRO (–ø–µ—Ä–µ–¥ –≤–æ–ø—Ä–æ—Å–æ–º: —Ñ–æ—Ç–æ + –æ–∑–≤—É—á–∫–∞) ====== */
    .introWrap{ margin-bottom: 14px; }
    .introCard{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(6,12,30,.32);
      padding: 12px;
      box-shadow: 0 14px 30px rgba(0,0,0,.18);
    }
    .introTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(255,255,255,.12);
    }
    .introStep{
      font-weight: 1000;
      letter-spacing:.2px;
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .introContent{
      padding-top: 12px;
      display:grid;
      grid-template-columns: 220px 1fr;
      gap: 12px;
      align-items:start;
    }
    @media (max-width: 720px){
      .introContent{ grid-template-columns: 1fr; }
    }
    .introArt{
      width: 220px;
      height: 220px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.16);
      background:
        radial-gradient(80px 80px at 30% 30%, rgba(255,255,255,.22), transparent 60%),
        linear-gradient(135deg, rgba(124,92,255,.22), rgba(46,230,166,.16));
      box-shadow: 0 18px 40px rgba(0,0,0,.22);
      display:grid;
      place-items:center;
      overflow:hidden;
      position:relative;
    }
    @media (max-width: 720px){
      .introArt{ width: 100%; height: 240px; }
    }
    .introArt svg{ width: 210px; height: 210px; }
    .introArt img.dinoImg{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      opacity:0;
      transform: scale(1.02);
      transition: opacity .25s ease, transform .25s ease;
    }
    .introArt.hasImg img.dinoImg{ opacity:1; transform: scale(1.0); }
    .introArt.hasImg svg{ opacity:0; }
    .introName{
      font-weight: 1000;
      font-size: 22px;
      letter-spacing:.2px;
    }
    .introWhen{
      margin-top: 6px;
      color: rgba(255,255,255,.78);
      font-size: 13.5px;
      line-height: 1.25;
    }
    .introAbout{
      margin-top: 10px;
      color: rgba(255,255,255,.86);
      line-height: 1.35;
      font-size: 14px;
    }

    /* helper */
    [hidden]{ display:none !important; }
  </style>
</head>
<body>
  <div class="stars"></div>
  <div class="confetti" id="confetti" aria-hidden="true"></div>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"><span>ü¶ñ</span></div>
        <div>
          <h1>–î–∏–Ω–æ-–ë–∞—Ç—Ç–ª –ö–≤–∏–∑</h1>
          <div class="subtitle">–ö—Ç–æ –ø–æ–±–µ–¥–∏—Ç? –ò –º–æ–≥–ª–∏ –ª–∏ –æ–Ω–∏ –≤–æ–æ–±—â–µ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è –≤–æ –≤—Ä–µ–º–µ–Ω–∏?</div>
        </div>
      </div>

      <div class="pill" aria-live="polite">
        <div class="k">–°–ß–Å–¢</div>
        <div class="v" id="scorePill">0</div>
        <div class="k">/ 10</div>
      </div>
    </header>

    <main>
      <section class="panel" id="mainPanel">
        <!-- dynamic content -->
      </section>

      <aside class="panel ladder" aria-label="–õ–µ—Å—Ç–Ω–∏—Ü–∞ –≤–æ–ø—Ä–æ—Å–æ–≤">
        <h2>–õ–µ—Å—Ç–Ω–∏—Ü–∞ —É—Ä–æ–≤–Ω–µ–π</h2>
        <ol class="steps" id="ladder"></ol>
        <div class="hint">–ü–æ–¥—Å–∫–∞–∑–∫–∞: –º–æ–∂–Ω–æ –æ—Ç–≤–µ—á–∞—Ç—å –∫–ª–∞–≤–∏—à–∞–º–∏ <span class="kbd">A</span> <span class="kbd">B</span> <span class="kbd">C</span> <span class="kbd">D</span></div>
      </aside>
    </main>
  </div>

  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lightboxCard" role="dialog" aria-modal="true" aria-label="–£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞">
      <div class="lightboxTop">
        <div class="lightboxTitle" id="lightboxTitle">–ö–∞—Ä—Ç–∏–Ω–∫–∞</div>
        <button class="lightboxClose" id="lightboxClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">
          <span aria-hidden="true">‚úï</span> –ó–∞–∫—Ä—ã—Ç—å
        </button>
      </div>
      <div class="lightboxBody">
        <div class="lightboxImgWrap">
          <img id="lightboxImg" alt="–£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ –¥–∏–Ω–æ–∑–∞–≤—Ä–∞" />
        </div>
        <div class="lightboxMeta">
          <div id="lightboxCaption"> </div>
          <div><a id="lightboxSource" href="#" target="_blank" rel="noreferrer noopener" style="display:none">–ò—Å—Ç–æ—á–Ω–∏–∫ (Wikimedia)</a></div>
        </div>
      </div>
    </div>
  </div>

<script>
/** ========== –î–ê–ù–ù–´–ï ========== **/
const dinos = {
  trex: {
    name: "–¢–∏-–†–µ–∫—Å", type: "theropod",
    period: "–ü–æ–∑–¥–Ω–∏–π –º–µ–ª", myaFrom: 68, myaTo: 66,
    wiki: "Tyrannosaurus",
    about: "–û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ö–∏—â–Ω–∏–∫–æ–≤. –û–≥—Ä–æ–º–Ω—ã–µ —á–µ–ª—é—Å—Ç–∏ –∏ –º–æ—â–Ω—ã–µ –Ω–æ–≥–∏ –¥–µ–ª–∞–ª–∏ –µ–≥–æ –≥—Ä–æ–∑–Ω—ã–º –æ—Ö–æ—Ç–Ω–∏–∫–æ–º (–∏, –≤–æ–∑–º–æ–∂–Ω–æ, –∏–Ω–æ–≥–¥–∞ –ø–∞–¥–∞–ª—å—â–∏–∫–æ–º).",
    tags:["—Ö–∏—â–Ω–∏–∫","—Å—É–ø–µ—Ä-—É–∫—É—Å"]
  },
  triceratops: {
    name: "–¢—Ä–∏—Ü–µ—Ä–∞—Ç–æ–ø—Å", type: "ceratopsian",
    period: "–ü–æ–∑–¥–Ω–∏–π –º–µ–ª", myaFrom: 68, myaTo: 66,
    wiki: "Triceratops",
    about: "–ë–æ–ª—å—à–æ–π —Ç—Ä–∞–≤–æ—è–¥–Ω—ã–π —Å —Ç—Ä–µ–º—è —Ä–æ–≥–∞–º–∏ –∏ –∫–æ—Å—Ç—è–Ω—ã–º ¬´—â–∏—Ç–æ–º¬ª –Ω–∞ –≥–æ–ª–æ–≤–µ. –ú–æ–≥ –∑–∞—â–∏—â–∞—Ç—å—Å—è –æ—Ç —Ö–∏—â–Ω–∏–∫–æ–≤, —É–ø–∏—Ä–∞—è—Å—å –∏ –±–æ–¥–∞—è.",
    tags:["—Ç—Ä–∞–≤–æ—è–¥–Ω—ã–π","—Ä–æ–≥–∞ + —â–∏—Ç"]
  },

  spino: {
    name: "–°–ø–∏–Ω–æ–∑–∞–≤—Ä", type: "spinosaur",
    period: "–†–∞–Ω–Ω–∏–π –º–µ–ª", myaFrom: 99, myaTo: 93,
    wiki: "Spinosaurus",
    about: "–ö—Ä—É–ø–Ω—ã–π —Ö–∏—â–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ–≤–æ–¥–∏–ª —É –≤–æ–¥—ã. –°—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ –æ–Ω –æ—Ç–ª–∏—á–Ω–æ –ª–æ–≤–∏–ª —Ä—ã–±—É –∏ –º–æ–≥ –ø–ª–∞–≤–∞—Ç—å –ª—É—á—à–µ –º–Ω–æ–≥–∏—Ö –¥—Ä—É–≥–∏—Ö –¥–∏–Ω–æ–∑–∞–≤—Ä–æ–≤.",
    tags:["—Ö–∏—â–Ω–∏–∫","–ø–æ–ª—É–≤–æ–¥–Ω—ã–π"]
  },
  giga: {
    name: "–ì–∏–≥–∞–Ω–æ—Ç–æ–∑–∞–≤—Ä", type: "theropod",
    period: "–ü–æ–∑–¥–Ω–∏–π –º–µ–ª", myaFrom: 99, myaTo: 97,
    wiki: "Giganotosaurus",
    about: "–û–¥–∏–Ω –∏–∑ –≥–∏–≥–∞–Ω—Ç—Å–∫–∏—Ö —Ö–∏—â–Ω–∏–∫–æ–≤ –Æ–∂–Ω–æ–π –ê–º–µ—Ä–∏–∫–∏. –î–ª–∏–Ω–Ω–∞—è –≥–æ–ª–æ–≤–∞ –∏ –º–æ—â–Ω—ã–µ –º—ã—à—Ü—ã –ø–æ–º–æ–≥–∞–ª–∏ –µ–º—É –æ—Ö–æ—Ç–∏—Ç—å—Å—è –Ω–∞ –±–æ–ª—å—à–∏—Ö —Ç—Ä–∞–≤–æ—è–¥–Ω—ã—Ö.",
    tags:["—Ö–∏—â–Ω–∏–∫","–æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π"]
  },

  // –†–∞–ø—Ç–æ—Ä—ã —á–∞—Å—Ç–æ —Ä–∏—Å—É—é—Ç —Å –ø–µ—Ä—å—è–º–∏. –ü–æ –ø—Ä–æ—Å—å–±–µ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–æ—Ç–æ –º–æ–¥–µ–ª–µ–π/—Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –±–µ–∑ –ø–µ—Ä—å–µ–≤.
  velociraptor: {
    name: "–í–µ–ª–æ—Ü–∏—Ä–∞–ø—Ç–æ—Ä", type: "raptor",
    period: "–ü–æ–∑–¥–Ω–∏–π –º–µ–ª", myaFrom: 75, myaTo: 71,
    wiki: "Velociraptor",
    imgOverride: "https://commons.wikimedia.org/wiki/Special:FilePath/Velociraptor_model.JPG",
    about: "–ù–µ–±–æ–ª—å—à–æ–π –±—ã—Å—Ç—Ä—ã–π —Ö–∏—â–Ω–∏–∫. –ù–∞—Å—Ç–æ—è—â–∏–π –≤–µ–ª–æ—Ü–∏—Ä–∞–ø—Ç–æ—Ä –±—ã–ª –º–µ–Ω—å—à–µ ¬´–∫–∏–Ω–æ—à–Ω–æ–≥–æ¬ª, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –æ—á–µ–Ω—å –ª–æ–≤–∫–∏–π –∏ –æ–ø–∞—Å–Ω—ã–π.",
    tags:["—Ö–∏—â–Ω–∏–∫","–±—ã—Å—Ç—Ä—ã–π"]
  },
  utahraptor: {
    name: "–Æ—Ç–∞—Ä–∞–ø—Ç–æ—Ä", type: "raptor",
    period: "–†–∞–Ω–Ω–∏–π –º–µ–ª", myaFrom: 126, myaTo: 121,
    wiki: "Utahraptor",
    imgOverride: "https://commons.wikimedia.org/wiki/Special:FilePath/Utahraptor_3.JPG",
    about: "–°–∞–º—ã–π –∫—Ä—É–ø–Ω—ã–π ¬´—Ä–∞–ø—Ç–æ—Ä¬ª –∏–∑ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö. –ë–æ–ª—å—à–æ–π —Å–µ—Ä–ø–æ–≤–∏–¥–Ω—ã–π –∫–æ–≥–æ—Ç—å –Ω–∞ –Ω–æ–≥–µ –ø–æ–º–æ–≥–∞–ª —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å –¥–æ–±—ã—á—É.",
    tags:["—Ö–∏—â–Ω–∏–∫","–∫—Ä—É–ø–Ω—ã–π —Ä–∞–ø—Ç–æ—Ä"]
  },

  stego: {
    name: "–°—Ç–µ–≥–æ–∑–∞–≤—Ä", type: "stegosaur",
    period: "–ü–æ–∑–¥–Ω—è—è —é—Ä–∞", myaFrom: 155, myaTo: 150,
    wiki: "Stegosaurus",
    about: "–¢—Ä–∞–≤–æ—è–¥–Ω—ã–π —Å –±–æ–ª—å—à–∏–º–∏ –ø–ª–∞—Å—Ç–∏–Ω–∞–º–∏ –Ω–∞ —Å–ø–∏–Ω–µ –∏ —à–∏–ø–∞–º–∏ –Ω–∞ —Ö–≤–æ—Å—Ç–µ. –•–≤–æ—Å—Ç–æ–º –º–æ–≥ –Ω–∞–Ω–æ—Å–∏—Ç—å –æ—á–µ–Ω—å –æ–ø–∞—Å–Ω—ã–µ —É–¥–∞—Ä—ã.",
    tags:["—Ç—Ä–∞–≤–æ—è–¥–Ω—ã–π","—à–∏–ø–∞—Å—Ç—ã–π —Ö–≤–æ—Å—Ç"]
  },
  allo: {
    name: "–ê–ª–ª–æ–∑–∞–≤—Ä", type: "theropod",
    period: "–ü–æ–∑–¥–Ω—è—è —é—Ä–∞", myaFrom: 155, myaTo: 145,
    wiki: "Allosaurus",
    about: "–û–¥–∏–Ω –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö —Ö–∏—â–Ω–∏–∫–æ–≤ —é—Ä—Å–∫–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞. –°—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ –æ–Ω –º–æ–≥ –æ—Ö–æ—Ç–∏—Ç—å—Å—è –Ω–∞ –±–æ–ª—å—à–∏—Ö —Ç—Ä–∞–≤–æ—è–¥–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏ —Å–∏–ª—É.",
    tags:["—Ö–∏—â–Ω–∏–∫","–æ—Ö–æ—Ç–Ω–∏–∫ —é—Ä—ã"]
  },

  brachio: {
    name: "–ë—Ä–∞—Ö–∏–æ–∑–∞–≤—Ä", type: "sauropod",
    period: "–ü–æ–∑–¥–Ω—è—è —é—Ä–∞", myaFrom: 154, myaTo: 150,
    wiki: "Brachiosaurus",
    about: "–ì–∏–≥–∞–Ω—Ç —Å –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–æ–π —à–µ–µ–π –∏ –≤—ã—Å–æ–∫–∏–º–∏ –ø–ª–µ—á–∞–º–∏. –î–æ—Å—Ç–∞–≤–∞–ª –ª–∏—Å—Ç—å—è —Ç–∞–º, –≥–¥–µ –¥—Ä—É–≥–∏–º –¥–∏–Ω–æ–∑–∞–≤—Ä–∞–º –±—ã–ª–æ —Ç—Ä—É–¥–Ω–æ.",
    tags:["–≥–∏–≥–∞–Ω—Ç","–¥–ª–∏–Ω–Ω–∞—è —à–µ—è"]
  },
  diplo: {
    name: "–î–∏–ø–ª–æ–¥–æ–∫", type: "sauropod",
    period: "–ü–æ–∑–¥–Ω—è—è —é—Ä–∞", myaFrom: 154, myaTo: 152,
    wiki: "Diplodocus",
    about: "–î–ª–∏–Ω–Ω–æ—à–µ–∏–π —Ç—Ä–∞–≤–æ—è–¥–Ω—ã–π —Å –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–º —Ö–≤–æ—Å—Ç–æ–º. –•–≤–æ—Å—Ç –º–æ–≥ —Å–ª—É–∂–∏—Ç—å –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–º, –∏ ¬´—Ö–ª—ã—Å—Ç–æ–º¬ª –¥–ª—è –∑–∞—â–∏—Ç—ã.",
    tags:["–≥–∏–≥–∞–Ω—Ç","—Ö–ª—ã—Å—Ç-—Ö–≤–æ—Å—Ç"]
  },

  ankylo: {
    name: "–ê–Ω–∫–∏–ª–æ–∑–∞–≤—Ä", type: "ankylosaur",
    period: "–ü–æ–∑–¥–Ω–∏–π –º–µ–ª", myaFrom: 68, myaTo: 66,
    wiki: "Ankylosaurus",
    about: "–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç—Ä–∞–≤–æ—è–¥–Ω—ã–π ‚Äî –ø–æ—á—Ç–∏ –∫–∞–∫ —Ç–∞–Ω–∫. –ö–æ—Å—Ç—è–Ω—ã–µ –ø–ª–∞—Å—Ç–∏–Ω—ã –∑–∞—â–∏—â–∞–ª–∏ —Å–ø–∏–Ω—É, –∞ —Ö–≤–æ—Å—Ç-–±—É–ª–∞–≤–∞ –º–æ–≥ –ª–æ–º–∞—Ç—å –∫–æ—Å—Ç–∏.",
    tags:["–±—Ä–æ–Ω—è","–±—É–ª–∞–≤–∞-—Ö–≤–æ—Å—Ç"]
  },
  carno: {
    name: "–ö–∞—Ä–Ω–æ—Ç–∞–≤—Ä", type: "theropod",
    period: "–ü–æ–∑–¥–Ω–∏–π –º–µ–ª", myaFrom: 72, myaTo: 69,
    wiki: "Carnotaurus",
    about: "–ë—ã—Å—Ç—Ä—ã–π —Ö–∏—â–Ω–∏–∫ —Å –º–∞–ª–µ–Ω—å–∫–∏–º–∏ ¬´—Ä–æ–∂–∫–∞–º–∏¬ª –Ω–∞–¥ –≥–ª–∞–∑–∞–º–∏. –ï–≥–æ –¥–ª–∏–Ω–Ω—ã–µ –Ω–æ–≥–∏ –Ω–∞–º–µ–∫–∞—é—Ç –Ω–∞ —Ö–æ—Ä–æ—à—É—é —Å–∫–æ—Ä–æ—Å—Ç—å.",
    tags:["—Ö–∏—â–Ω–∏–∫","–±—ã—Å—Ç—Ä—ã–π"]
  },

  parasauro: {
    name: "–ü–∞—Ä–∞–∑–∞–≤—Ä–æ–ª–æ—Ñ", type: "hadrosaur",
    period: "–ü–æ–∑–¥–Ω–∏–π –º–µ–ª", myaFrom: 76, myaTo: 73,
    wiki: "Parasaurolophus",
    about: "–¢—Ä–∞–≤–æ—è–¥–Ω—ã–π ¬´—É—Ç–∫–æ–Ω–æ—Å¬ª —Å –±–æ–ª—å—à–∏–º –≥—Ä–µ–±–Ω–µ–º-—Ç—Ä—É–±–æ–π. –í–æ–∑–º–æ–∂–Ω–æ, –≥—Ä–µ–±–µ–Ω—å –ø–æ–º–æ–≥–∞–ª –∏–∑–¥–∞–≤–∞—Ç—å –≥—Ä–æ–º–∫–∏–µ –∑–≤—É–∫–∏.",
    tags:["—Ç—Ä–∞–≤–æ—è–¥–Ω—ã–π","–≥—Ä–µ–±–µ–Ω—å-—Ç—Ä—É–±–∞"]
  },
  iguanodon: {
    name: "–ò–≥—É–∞–Ω–æ–¥–æ–Ω", type: "ornithopod",
    period: "–†–∞–Ω–Ω–∏–π –º–µ–ª", myaFrom: 126, myaTo: 113,
    wiki: "Iguanodon",
    about: "–ö—Ä—É–ø–Ω—ã–π —Ç—Ä–∞–≤–æ—è–¥–Ω—ã–π —Å ¬´—à–∏–ø–æ–º-–ø–∞–ª—å—Ü–µ–º¬ª –Ω–∞ —Ä—É–∫–µ. –ú–æ–≥ —Ö–æ–¥–∏—Ç—å –∏ –Ω–∞ –¥–≤—É—Ö, –∏ –Ω–∞ —á–µ—Ç—ã—Ä—ë—Ö –Ω–æ–≥–∞—Ö.",
    tags:["—Ç—Ä–∞–≤–æ—è–¥–Ω—ã–π","—à–∏–ø-–ø–∞–ª–µ—Ü"]
  },

  pachy: {
    name: "–ü–∞—Ö–∏—Ü–µ—Ñ–∞–ª–æ–∑–∞–≤—Ä", type: "pachy",
    period: "–ü–æ–∑–¥–Ω–∏–π –º–µ–ª", myaFrom: 72, myaTo: 66,
    wiki: "Pachycephalosaurus",
    about: "–î–∏–Ω–æ–∑–∞–≤—Ä —Å –æ—á–µ–Ω—å —Ç–æ–ª—Å—Ç—ã–º –∫—É–ø–æ–ª–æ–º –Ω–∞ –≥–æ–ª–æ–≤–µ. –í–æ–∑–º–æ–∂–Ω–æ, –±–æ–¥–∞–ª—Å—è —Å —Å–æ—Ä–æ–¥–∏—á–∞–º–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –≥–æ–ª–æ–≤—É –¥–ª—è –∑–∞—â–∏—Ç—ã.",
    tags:["–∫—Ä–µ–ø–∫–∏–π –ª–æ–±","—Ç–∞—Ä–∞–Ω"]
  },

  oviraptor: {
    name: "–û–≤–∏—Ä–∞–ø—Ç–æ—Ä", type: "oviraptor",
    period: "–ü–æ–∑–¥–Ω–∏–π –º–µ–ª", myaFrom: 75, myaTo: 71,
    wiki: "Oviraptor",
    imgOverride: "https://commons.wikimedia.org/wiki/Special:FilePath/Oviraptor.jpg",
    about: "–ë—ã—Å—Ç—Ä—ã–π –¥–∏–Ω–æ–∑–∞–≤—Ä —Å –∫–ª—é–≤–æ–º. –†–∞–Ω—å—à–µ –¥—É–º–∞–ª–∏, —á—Ç–æ –æ–Ω –≤–æ—Ä—É–µ—Ç —è–π—Ü–∞, –Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –º–æ–≥ –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ –∫–ª–∞–¥–∫–µ.",
    tags:["–≤—Å—ë—è–¥–Ω—ã–π","–±—ã—Å—Ç—Ä—ã–π"]
  },

  argentino: {
    name: "–ê—Ä–≥–µ–Ω—Ç–∏–Ω–æ–∑–∞–≤—Ä", type: "sauropod",
    period: "–ü–æ–∑–¥–Ω–∏–π –º–µ–ª", myaFrom: 97, myaTo: 94,
    wiki: "Argentinosaurus",
    about: "–û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –±–æ–ª—å—à–∏—Ö –¥–∏–Ω–æ–∑–∞–≤—Ä–æ–≤. –ì–∏–≥–∞–Ω—Ç-—Ç–∏—Ç–∞–Ω, –∫–æ—Ç–æ—Ä–æ–º—É –ª—É—á—à–µ –±—ã–ª–æ –¥–µ—Ä–∂–∞—Ç—å—Å—è –≤ —Å—Ç–∞–¥–µ —Ä–∞–¥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.",
    tags:["—Ç–∏—Ç–∞–Ω","–æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π"]
  },

  therizino: {
    name: "–¢–µ—Ä–∏–∑–∏–Ω–æ–∑–∞–≤—Ä", type: "therizino",
    period: "–ü–æ–∑–¥–Ω–∏–π –º–µ–ª", myaFrom: 70, myaTo: 66,
    wiki: "Therizinosaurus",
    imgOverride: "https://commons.wikimedia.org/wiki/Special:FilePath/Therizinosaurus_-.jpg",
    about: "–û—á–µ–Ω—å –Ω–µ–æ–±—ã—á–Ω—ã–π –¥–∏–Ω–æ–∑–∞–≤—Ä —Å –æ–≥—Ä–æ–º–Ω—ã–º–∏ –∫–æ–≥—Ç—è–º–∏. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –±—ã–ª —Ç—Ä–∞–≤–æ—è–¥–Ω—ã–º –∏–ª–∏ –≤—Å–µ—è–¥–Ω—ã–º –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∫–æ–≥—Ç–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã –∏ –¥–æ–±—ã—á–∏ –µ–¥—ã.",
    tags:["–¥–ª–∏–Ω–Ω—ã–µ –∫–æ–≥—Ç–∏","—Å—Ç—Ä–∞–Ω–Ω—ã–π"]
  },

  dilo: {
    name: "–î–∏–ª–æ—Ñ–æ–∑–∞–≤—Ä", type: "theropod",
    period: "–†–∞–Ω–Ω—è—è —é—Ä–∞", myaFrom: 193, myaTo: 190,
    wiki: "Dilophosaurus",
    about: "–•–∏—â–Ω–∏–∫ —Ä–∞–Ω–Ω–µ–π —é—Ä—ã —Å –¥–≤—É–º—è –≥—Ä–µ–±–Ω—è–º–∏ –Ω–∞ –≥–æ–ª–æ–≤–µ. –í –∫–∏–Ω–æ –µ–º—É –ø—Ä–∏–¥—É–º—ã–≤–∞—é—Ç ¬´—è–¥¬ª, –Ω–æ —ç—Ç–æ —Ñ–∞–Ω—Ç–∞–∑–∏—è ‚Äî –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –Ω–µ—Ç.",
    tags:["—Ö–∏—â–Ω–∏–∫","–±—ã—Å—Ç—Ä—ã–π"]
  },

  deinonychus: {
    name: "–î–µ–π–Ω–æ–Ω–∏—Ö", type: "raptor",
    period: "–†–∞–Ω–Ω–∏–π –º–µ–ª", myaFrom: 115, myaTo: 108,
    wiki: "Deinonychus",
    imgOverride: "https://commons.wikimedia.org/wiki/Special:FilePath/Deinonychus_model_Baltow.jpg",
    about: "–°–∏–ª—å–Ω—ã–π –∏ –ª–æ–≤–∫–∏–π —Ö–∏—â–Ω–∏–∫ —Å –±–æ–ª—å—à–∏–º —Å–µ—Ä–ø–æ–≤–∏–¥–Ω—ã–º –∫–æ–≥—Ç–µ–º –Ω–∞ –Ω–æ–≥–µ. –ï–≥–æ –∏–∑—É—á–µ–Ω–∏–µ –ø–æ–º–æ–≥–ª–æ —É—á—ë–Ω—ã–º –ø–æ-–Ω–æ–≤–æ–º—É –≤–∑–≥–ª—è–Ω—É—Ç—å –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–∏–Ω–æ–∑–∞–≤—Ä–æ–≤.",
    tags:["—Ö–∏—â–Ω–∏–∫","—É–º–Ω—ã–π –æ—Ö–æ—Ç–Ω–∏–∫"]
  },
};

function rangesOverlap(aFrom, aTo, bFrom, bTo){
  const latest = Math.max(aTo, bTo);
  const earliest = Math.min(aFrom, bFrom);
  return latest <= earliest;
}

const questions = [
  { a: "trex", b: "triceratops", winner: "trex", canMeet: true,
    story: "–¢—Ä–∏—Ü–µ—Ä–∞—Ç–æ–ø—Å –º–æ–≥ –∑–∞—â–∏—â–∞—Ç—å—Å—è —Ä–æ–≥–∞–º–∏ –∏ —â–∏—Ç–æ–º, –Ω–æ –¢–∏-–†–µ–∫—Å —Å–∏–ª—å–Ω–µ–µ –≤ –∞—Ç–∞–∫–µ. –í –ª–æ–±–æ–≤—É—é —Å—Ö–≤–∞—Ç–∫—É —Ö–∏—â–Ω–∏–∫ —Ä–∏—Å–∫–æ–≤–∞–ª –±—ã, –Ω–æ –≤ –∏—Ç–æ–≥–µ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –Ω–∞—à—ë–ª –±—ã –º–æ–º–µ–Ω—Ç –¥–ª—è —Ä–µ—à–∞—é—â–µ–≥–æ —É–∫—É—Å–∞."
  },
  { a: "spino", b: "giga", winner: "giga", canMeet: false,
    story: "–û–Ω–∏ –∂–∏–ª–∏ –Ω–µ –≤ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –≤—Ä–µ–º—è –∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞—Ö. –ï—Å–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —á—É–¥–æ-–≤—Å—Ç—Ä–µ—á—É –Ω–∞ —Å—É—à–µ, –ì–∏–≥–∞–Ω–æ—Ç–æ–∑–∞–≤—Ä –±—ã–ª –±—ã –±–æ–ª–µ–µ ¬´–Ω–∞–∑–µ–º–Ω—ã–º –±–æ–π—Ü–æ–º¬ª –∏ –∏–º–µ–ª –±—ã –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –≤ —Å–∏–ª–æ–≤–æ–π –¥—Ä–∞–∫–µ."
  },
  { a: "velociraptor", b: "utahraptor", winner: "utahraptor", canMeet: false,
    story: "–û–Ω–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –¥–µ—Å—è—Ç–∫–∞–º–∏ –º–∏–ª–ª–∏–æ–Ω–æ–≤ –ª–µ—Ç. –í –≤—ã–¥—É–º–∞–Ω–Ω–æ–π –≤—Å—Ç—Ä–µ—á–µ –Æ—Ç–∞—Ä–∞–ø—Ç–æ—Ä –Ω–∞–º–Ω–æ–≥–æ –∫—Ä—É–ø–Ω–µ–µ –∏ —Ç—è–∂–µ–ª–µ–µ, –ø–æ—ç—Ç–æ–º—É —É –Ω–µ–≥–æ –±–æ–ª—å—à–µ —à–∞–Ω—Å–æ–≤ –ø–æ–±–µ–¥–∏—Ç—å –≤ –ø—Ä—è–º–æ–π —Å—Ö–≤–∞—Ç–∫–µ."
  },
  { a: "stego", b: "allo", winner: "stego", canMeet: true,
    story: "–ê–ª–ª–æ–∑–∞–≤—Ä –±—ã–ª –æ–ø–∞—Å–Ω—ã–º –æ—Ö–æ—Ç–Ω–∏–∫–æ–º, –Ω–æ –°—Ç–µ–≥–æ–∑–∞–≤—Ä –º–æ–≥ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å—Å—è –∏ —É–¥–∞—Ä–∏—Ç—å —Ö–≤–æ—Å—Ç–æ–º —Å —à–∏–ø–∞–º–∏. –û–¥–∏–Ω —Ç–æ—á–Ω—ã–π —É–¥–∞—Ä –ø–æ –±–æ–∫—É –∏–ª–∏ –Ω–æ–≥–µ ‚Äî –∏ —Ö–∏—â–Ω–∏–∫—É –ø—Ä–∏—à–ª–æ—Å—å –±—ã –æ—Ç—Å—Ç—É–ø–∏—Ç—å."
  },
  { a: "brachio", b: "diplo", winner: "brachio", canMeet: true,
    story: "–û–±–∞ ‚Äî –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–µ —Ç—Ä–∞–≤–æ—è–¥–Ω—ã–µ –∏–∑ —é—Ä—ã. –í —Å–ø–æ—Ä–µ –∑–∞ –º–µ—Å—Ç–æ —É –¥–µ—Ä–µ–≤—å–µ–≤ –ë—Ä–∞—Ö–∏–æ–∑–∞–≤—Ä –≤—ã—à–µ –∏ —Ç—è–∂–µ–ª–µ–µ, –ø–æ—ç—Ç–æ–º—É, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Å–º–æ–≥ –±—ã ¬´–≤—ã–¥–∞–≤–∏—Ç—å¬ª –î–∏–ø–ª–æ–¥–æ–∫–∞, –Ω–µ –¥–æ–≤–æ–¥—è –¥–µ–ª–æ –¥–æ —Å–µ—Ä—å—ë–∑–Ω–æ–π –¥—Ä–∞–∫–∏."
  },
  { a: "ankylo", b: "carno", winner: "ankylo", canMeet: false,
    story: "–û–Ω–∏ –∂–∏–ª–∏ –≤ –æ–¥–Ω–æ –≤—Ä–µ–º—è, –Ω–æ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞—Ö. –í —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–º –±–æ—é –ê–Ω–∫–∏–ª–æ–∑–∞–≤—Ä ‚Äî –∫–∞–∫ —Ç–∞–Ω–∫: –±—Ä–æ–Ω—è –∏ —Ö–≤–æ—Å—Ç-–±—É–ª–∞–≤–∞. –ö–∞—Ä–Ω–æ—Ç–∞–≤—Ä –º–æ–≥ –±—ã –ø—ã—Ç–∞—Ç—å—Å—è –∫—Ä—É–∂–∏—Ç—å, –Ω–æ –æ–¥–∏–Ω —É–¥–∞—Ä –±—É–ª–∞–≤–æ–π ‚Äî –∏ –≤—Å—ë —Ä–µ—à–µ–Ω–æ."
  },
  { a: "parasauro", b: "iguanodon", winner: "iguanodon", canMeet: false,
    story: "–ü–∞—Ä–∞–∑–∞–≤—Ä–æ–ª–æ—Ñ –∏ –ò–≥—É–∞–Ω–æ–¥–æ–Ω —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–µ–º. –ï—Å–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –≤—Å—Ç—Ä–µ—á—É, —É –ò–≥—É–∞–Ω–æ–¥–æ–Ω–∞ –µ—Å—Ç—å ¬´—à–∏–ø-–ø–∞–ª–µ—Ü¬ª ‚Äî —Ö–æ—Ä–æ—à–∏–π –∑–∞—â–∏—Ç–Ω—ã–π –ø—Ä–∏—ë–º, –ø–æ—ç—Ç–æ–º—É –æ–Ω –≤–µ—Ä–æ—è—Ç–Ω–µ–µ –≤—ã–π–¥–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–º –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ."
  },
  { a: "pachy", b: "oviraptor", winner: "pachy", canMeet: true,
    story: "–ü–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–Ω–∏ –º–æ–≥–ª–∏ –∂–∏—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –û–≤–∏—Ä–∞–ø—Ç–æ—Ä –±—ã—Å—Ç—Ä—ã–π, –Ω–æ –ü–∞—Ö–∏—Ü–µ—Ñ–∞–ª–æ–∑–∞–≤—Ä —É–º–µ–µ—Ç –±–æ–¥–∞—Ç—å—Å—è –∫—Ä–µ–ø–∫–∏–º ¬´–∫—É–ø–æ–ª–æ–º¬ª –≥–æ–ª–æ–≤—ã. –í —Ç–µ—Å–Ω–æ–π –¥—Ä–∞–∫–µ —Ç–∞—Ä–∞–Ω –¥–∞—ë—Ç –µ–º—É –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ."
  },
  { a: "argentino", b: "therizino", winner: "argentino", canMeet: false,
    story: "–û–Ω–∏ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞–ª–∏—Å—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏. –í —Ñ–∞–Ω—Ç–∞–∑–∏–π–Ω–æ–π –≤—Å—Ç—Ä–µ—á–µ –ê—Ä–≥–µ–Ω—Ç–∏–Ω–æ–∑–∞–≤—Ä –Ω–∞—Å—Ç–æ–ª—å–∫–æ –æ–≥—Ä–æ–º–µ–Ω, —á—Ç–æ –¢–µ—Ä–∏–∑–∏–Ω–æ–∑–∞–≤—Ä—É –ª—É—á—à–µ –¥–µ—Ä–∂–∞—Ç—å—Å—è –ø–æ–¥–∞–ª—å—à–µ: –≥–∏–≥–∞–Ω—Ç –º–æ–≥ –±—ã –ø—Ä–æ—Å—Ç–æ –æ—Ç—Ç–æ–ª–∫–Ω—É—Ç—å –µ–≥–æ –º–∞—Å—Å–æ–π –∏ —Å–∏–ª–æ–π."
  },
  { a: "dilo", b: "deinonychus", winner: "deinonychus", canMeet: false,
    story: "–ò—Ö —Ä–∞–∑–¥–µ–ª—è—é—Ç –º–∏–ª–ª–∏–æ–Ω—ã –ª–µ—Ç. –ï—Å–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –±–æ–π, –î–µ–π–Ω–æ–Ω–∏—Ö –±–æ–ª–µ–µ ¬´–ø—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω¬ª –∫ –±–ª–∏–∂–Ω–µ–π –æ—Ö–æ—Ç–µ: –º–æ—â–Ω—ã–µ –ª–∞–ø—ã –∏ –æ–ø–∞—Å–Ω—ã–π –∫–æ–≥–æ—Ç—å –Ω–∞ –Ω–æ–≥–µ –¥–∞—é—Ç –µ–º—É —Ö–æ—Ä–æ—à–∏–µ —à–∞–Ω—Å—ã –ø–æ–±–µ–¥–∏—Ç—å."
  },
];

/** ========== –ì–†–ê–§–ò–ö–ê: –ü–†–û–°–¢–´–ï SVG-–ö–ê–†–¢–ò–ù–ö–ò ========== **/
function hashCode(str){
  let h = 0;
  for (let i=0;i<str.length;i++){
    h = (h<<5) - h + str.charCodeAt(i);
    h |= 0;
  }
  return Math.abs(h);
}
function colorFromName(name){
  const h = hashCode(name) % 360;
  return {
    body: `hsl(${h} 78% 55%)`,
    belly: `hsl(${(h+18)%360} 78% 70%)`,
    spot: `hsl(${(h+200)%360} 70% 60%)`
  };
}

function svgDino(type, colors){
  const {body, belly, spot} = colors;

  const common = (inner) => `
    <svg viewBox="0 0 100 100" role="img" aria-label="–ö–∞—Ä—Ç–∏–Ω–∫–∞ –¥–∏–Ω–æ–∑–∞–≤—Ä–∞">
      <defs>
        <filter id="s" x="-30%" y="-30%" width="160%" height="160%">
          <feDropShadow dx="0" dy="6" stdDeviation="5" flood-color="rgba(0,0,0,.35)"/>
        </filter>
      </defs>
      <g filter="url(#s)">${inner}</g>
    </svg>
  `;

  if(type === "sauropod"){
    return common(`
      <ellipse cx="46" cy="60" rx="26" ry="18" fill="${body}"/>
      <ellipse cx="52" cy="64" rx="16" ry="10" fill="${belly}" opacity=".9"/>
      <path d="M54 54 C60 38, 74 26, 78 18 C81 13, 86 18, 83 24 C78 34, 72 46, 64 60" fill="${body}"/>
      <circle cx="80" cy="18" r="10" fill="${body}"/>
      <circle cx="83" cy="17" r="2.2" fill="rgba(0,0,0,.65)"/>
      <path d="M30 68 C20 78, 20 86, 22 90" stroke="${body}" stroke-width="10" stroke-linecap="round" fill="none"/>
      <path d="M42 76 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M58 76 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <circle cx="34" cy="58" r="3.5" fill="${spot}" opacity=".85"/>
      <circle cx="42" cy="52" r="2.8" fill="${spot}" opacity=".8"/>
    `);
  }

  if(type === "ceratopsian"){
    return common(`
      <ellipse cx="50" cy="62" rx="28" ry="18" fill="${body}"/>
      <ellipse cx="53" cy="66" rx="16" ry="10" fill="${belly}" opacity=".9"/>
      <circle cx="74" cy="56" r="14" fill="${body}"/>
      <path d="M66 44 C70 36, 78 34, 84 40 C86 42, 86 46, 84 49 C80 54, 74 54, 70 52" fill="${spot}" opacity=".9"/>
      <path d="M78 44 L86 34" stroke="${belly}" stroke-width="5" stroke-linecap="round"/>
      <path d="M72 46 L80 38" stroke="${belly}" stroke-width="5" stroke-linecap="round"/>
      <circle cx="78" cy="55" r="2.2" fill="rgba(0,0,0,.65)"/>
      <path d="M22 68 v16" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M40 72 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M60 72 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M20 58 C14 60, 12 62, 10 66" stroke="${body}" stroke-width="7" stroke-linecap="round" fill="none" opacity=".9"/>
    `);
  }

  if(type === "stegosaur"){
    return common(`
      <ellipse cx="48" cy="64" rx="30" ry="18" fill="${body}"/>
      <ellipse cx="52" cy="66" rx="16" ry="10" fill="${belly}" opacity=".9"/>
      <circle cx="74" cy="58" r="10" fill="${body}"/>
      <circle cx="77" cy="57" r="2" fill="rgba(0,0,0,.65)"/>
      <path d="M62 48 l6 -12 l6 12 z" fill="${spot}"/>
      <path d="M52 46 l6 -12 l6 12 z" fill="${spot}" opacity=".95"/>
      <path d="M42 48 l6 -12 l6 12 z" fill="${spot}" opacity=".9"/>
      <path d="M32 52 l6 -12 l6 12 z" fill="${spot}" opacity=".85"/>
      <path d="M26 68 v16" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M44 72 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M60 72 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M20 62 C12 70, 10 74, 10 78" stroke="${body}" stroke-width="8" stroke-linecap="round" fill="none"/>
      <path d="M10 78 l-8 6" stroke="${spot}" stroke-width="4" stroke-linecap="round"/>
      <path d="M12 76 l-10 2" stroke="${spot}" stroke-width="4" stroke-linecap="round"/>
    `);
  }

  if(type === "ankylosaur"){
    return common(`
      <ellipse cx="50" cy="64" rx="30" ry="18" fill="${body}"/>
      <ellipse cx="50" cy="64" rx="22" ry="12" fill="${belly}" opacity=".85"/>
      <circle cx="78" cy="60" r="10" fill="${body}"/>
      <circle cx="81" cy="59" r="2" fill="rgba(0,0,0,.65)"/>
      <circle cx="38" cy="58" r="3.2" fill="${spot}" opacity=".9"/>
      <circle cx="46" cy="54" r="2.8" fill="${spot}" opacity=".85"/>
      <circle cx="55" cy="56" r="2.6" fill="${spot}" opacity=".8"/>
      <circle cx="62" cy="60" r="2.8" fill="${spot}" opacity=".78"/>
      <path d="M24 70 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M42 72 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M58 72 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M18 62 C10 70, 10 78, 18 84" stroke="${body}" stroke-width="8" stroke-linecap="round" fill="none"/>
      <circle cx="20" cy="85" r="6" fill="${spot}" opacity=".9"/>
    `);
  }

  if(type === "hadrosaur"){
    return common(`
      <ellipse cx="48" cy="64" rx="28" ry="18" fill="${body}"/>
      <ellipse cx="52" cy="66" rx="16" ry="10" fill="${belly}" opacity=".9"/>
      <circle cx="74" cy="56" r="12" fill="${body}"/>
      <path d="M74 40 C66 40, 64 54, 74 54 C82 54, 84 44, 74 40" fill="${spot}" opacity=".85"/>
      <circle cx="78" cy="55" r="2.2" fill="rgba(0,0,0,.65)"/>
      <path d="M30 70 v16" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M48 72 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M62 72 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M18 66 C10 74, 10 82, 16 88" stroke="${body}" stroke-width="7" stroke-linecap="round" fill="none"/>
    `);
  }

  if(type === "pachy"){
    return common(`
      <ellipse cx="48" cy="64" rx="28" ry="18" fill="${body}"/>
      <ellipse cx="52" cy="66" rx="16" ry="10" fill="${belly}" opacity=".9"/>
      <circle cx="74" cy="58" r="11" fill="${body}"/>
      <path d="M74 48 C66 48, 64 60, 74 60 C82 60, 84 48, 74 48" fill="${spot}" opacity=".9"/>
      <circle cx="78" cy="57" r="2.2" fill="rgba(0,0,0,.65)"/>
      <path d="M30 70 v16" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M48 72 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M62 72 v14" stroke="${body}" stroke-width="8" stroke-linecap="round"/>
      <path d="M18 66 C10 74, 10 82, 16 88" stroke="${body}" stroke-width="7" stroke-linecap="round" fill="none"/>
    `);
  }

  if(type === "raptor"){
    return common(`
      <ellipse cx="48" cy="66" rx="24" ry="14" fill="${body}"/>
      <ellipse cx="52" cy="68" rx="14" ry="8" fill="${belly}" opacity=".9"/>
      <circle cx="72" cy="56" r="12" fill="${body}"/>
      <circle cx="76" cy="55" r="2.2" fill="rgba(0,0,0,.65)"/>
      <path d="M64 58 C68 62, 74 62, 78 60" stroke="${belly}" stroke-width="4" stroke-linecap="round"/>
      <path d="M28 72 C22 76, 22 86, 28 90" stroke="${body}" stroke-width="7" stroke-linecap="round" fill="none"/>
      <path d="M40 74 v16" stroke="${body}" stroke-width="7" stroke-linecap="round"/>
      <path d="M56 74 v16" stroke="${body}" stroke-width="7" stroke-linecap="round"/>
      <path d="M56 90 q6 0 6 -6" stroke="${spot}" stroke-width="4" stroke-linecap="round" fill="none"/>
      <path d="M22 60 C12 54, 10 46, 14 40" stroke="${body}" stroke-width="7" stroke-linecap="round" fill="none"/>
      <circle cx="44" cy="60" r="2.5" fill="${spot}" opacity=".85"/>
      <circle cx="50" cy="56" r="2.1" fill="${spot}" opacity=".82"/>
    `);
  }

  if(type === "therizino"){
    return common(`
      <ellipse cx="48" cy="66" rx="24" ry="14" fill="${body}"/>
      <ellipse cx="52" cy="68" rx="14" ry="8" fill="${belly}" opacity=".9"/>
      <circle cx="70" cy="56" r="11" fill="${body}"/>
      <circle cx="73" cy="55" r="2.1" fill="rgba(0,0,0,.65)"/>
      <path d="M44 64 C44 52, 34 48, 28 54" stroke="${body}" stroke-width="7" stroke-linecap="round" fill="none"/>
      <path d="M26 54 l-10 10" stroke="${spot}" stroke-width="4" stroke-linecap="round"/>
      <path d="M30 56 l-12 14" stroke="${spot}" stroke-width="4" stroke-linecap="round"/>
      <path d="M34 58 l-12 16" stroke="${spot}" stroke-width="4" stroke-linecap="round"/>
      <path d="M36 74 v16" stroke="${body}" stroke-width="7" stroke-linecap="round"/>
      <path d="M54 74 v16" stroke="${body}" stroke-width="7" stroke-linecap="round"/>
      <path d="M20 70 C12 78, 12 86, 18 92" stroke="${body}" stroke-width="7" stroke-linecap="round" fill="none"/>
    `);
  }

  if(type === "oviraptor"){
    return common(`
      <ellipse cx="48" cy="66" rx="24" ry="14" fill="${body}"/>
      <ellipse cx="52" cy="68" rx="14" ry="8" fill="${belly}" opacity=".9"/>
      <circle cx="70" cy="56" r="11" fill="${body}"/>
      <path d="M74 56 C80 58, 82 62, 78 64 C74 66, 70 64, 70 60" fill="${spot}" opacity=".9"/>
      <circle cx="72" cy="54" r="2.1" fill="rgba(0,0,0,.65)"/>
      <path d="M68 44 C66 38, 72 34, 78 38" stroke="${spot}" stroke-width="5" stroke-linecap="round" fill="none"/>
      <path d="M36 74 v16" stroke="${body}" stroke-width="7" stroke-linecap="round"/>
      <path d="M54 74 v16" stroke="${body}" stroke-width="7" stroke-linecap="round"/>
      <path d="M20 70 C12 78, 12 86, 18 92" stroke="${body}" stroke-width="7" stroke-linecap="round" fill="none"/>
      <circle cx="44" cy="60" r="2.4" fill="${spot}" opacity=".85"/>
      <circle cx="50" cy="56" r="2.0" fill="${spot}" opacity=".82"/>
    `);
  }

  if(type === "spinosaur"){
    return common(`
      <ellipse cx="46" cy="66" rx="24" ry="14" fill="${body}"/>
      <ellipse cx="50" cy="68" rx="14" ry="8" fill="${belly}" opacity=".9"/>
      <circle cx="70" cy="56" r="11" fill="${body}"/>
      <circle cx="73" cy="55" r="2.1" fill="rgba(0,0,0,.65)"/>
      <path d="M40 50 l6 -14 l6 14 z" fill="${spot}" opacity=".95"/>
      <path d="M32 52 l6 -14 l6 14 z" fill="${spot}" opacity=".9"/>
      <path d="M24 56 l6 -14 l6 14 z" fill="${spot}" opacity=".85"/>
      <path d="M36 74 v16" stroke="${body}" stroke-width="7" stroke-linecap="round"/>
      <path d="M54 74 v16" stroke="${body}" stroke-width="7" stroke-linecap="round"/>
      <path d="M18 70 C10 78, 10 86, 16 92" stroke="${body}" stroke-width="7" stroke-linecap="round" fill="none"/>
    `);
  }

  return common(`
    <ellipse cx="48" cy="66" rx="24" ry="14" fill="${body}"/>
    <ellipse cx="52" cy="68" rx="14" ry="8" fill="${belly}" opacity=".9"/>
    <circle cx="72" cy="56" r="12" fill="${body}"/>
    <circle cx="76" cy="55" r="2.2" fill="rgba(0,0,0,.65)"/>
    <path d="M64 58 C68 62, 74 62, 78 60" stroke="${belly}" stroke-width="4" stroke-linecap="round"/>
    <path d="M42 62 C42 54, 36 52, 32 56" stroke="${body}" stroke-width="7" stroke-linecap="round" fill="none"/>
    <path d="M34 58 l-10 8" stroke="${spot}" stroke-width="4" stroke-linecap="round"/>
    <path d="M36 74 v16" stroke="${body}" stroke-width="7" stroke-linecap="round"/>
    <path d="M54 74 v16" stroke="${body}" stroke-width="7" stroke-linecap="round"/>
    <path d="M20 70 C12 78, 12 86, 18 92" stroke="${body}" stroke-width="7" stroke-linecap="round" fill="none"/>
    <circle cx="44" cy="60" r="2.5" fill="${spot}" opacity=".85"/>
    <circle cx="50" cy="56" r="2.1" fill="${spot}" opacity=".82"/>
  `);
}

/** ========== –ö–ê–†–¢–ò–ù–ö–ò –ò–ó WIKIMEDIA COMMONS (–¢–û–õ–¨–ö–û ¬´–ñ–ò–í–´–ï¬ª –†–ï–ö–û–ù–°–¢–†–£–ö–¶–ò–ò) ========== **/
const imageCache = new Map();

function looksBadForThisGame(s){
  const t = (s || "").toLowerCase();
  const bad = [
    "skeleton","skeletal","skull","cranium","bone","bones","fossil","cast","mount",
    "specimen","holotype","type specimen","jaw","vertebra","rib","pelvis","femur",
    "trackway","footprint","ichnite"
  ];
  const badFeathers = ["feather","feathered","plumage","plumed"];
  return bad.some(w => t.includes(w)) || badFeathers.some(w => t.includes(w));
}

function scoreNice(t){
  t = (t || "").toLowerCase();
  let s = 0;
  const good = [
    ["life restoration", 12],
    ["restoration", 9],
    ["life reconstruction", 10],
    ["reconstruction", 7],
    ["paleoart", 8],
    ["artist", 4],
    ["illustration", 5],
    ["painting", 5],
    ["art", 2],
    ["model", 6],
    ["animatronic", 6],
    ["statue", 4],
    ["sculpture", 4]
  ];
  for(const [k, w] of good) if(t.includes(k)) s += w;
  if(t.includes(".jpg") || t.includes(".jpeg") || t.includes(".png")) s += 1;
  return s;
}

async function searchCommonsImage(query){
  const key = "commons:" + query;
  if(imageCache.has(key)) return imageCache.get(key);

  const api = "https://commons.wikimedia.org/w/api.php?"
    + new URLSearchParams({
      action: "query",
      format: "json",
      origin: "*",
      generator: "search",
      gsrnamespace: "6",
      gsrlimit: "18",
      gsrsearch: query,
      prop: "imageinfo|categories",
      iiprop: "url",
      cllimit: "20"
    }).toString();

  const res = await fetch(api, { headers: { "accept": "application/json" } });
  if(!res.ok) throw new Error("commons fetch failed");
  const data = await res.json();

  const pages = data?.query?.pages || {};
  const items = Object.values(pages)
    .map(p => ({
      title: p.title || "",
      url: p?.imageinfo?.[0]?.url || "",
      cats: (p.categories || []).map(c => c.title || "")
    }))
    .filter(x => x.url && x.title);

  let best = null;
  let bestScore = -999;

  for(const it of items){
    const bad =
      looksBadForThisGame(it.title) ||
      looksBadForThisGame(it.url) ||
      (it.cats || []).some(c => looksBadForThisGame(c));
    if(bad) continue;

    let s = scoreNice(it.title);
    for(const c of (it.cats || [])) s += scoreNice(c) * 0.35;

    const techBad = ["diagram", "silhouette", "outline"];
    if(techBad.some(w => (it.title || "").toLowerCase().includes(w))) s -= 2;

    if(s > bestScore){
      bestScore = s;
      best = it;
    }
  }

  const result = best ? { url: best.url, title: best.title } : null;
  imageCache.set(key, result);
  return result;
}

function commonsFilePageFromTitleOrUrl(title, url){
  if(title && title.toLowerCase().startsWith("file:")){
    return "https://commons.wikimedia.org/wiki/" + title.replaceAll(" ", "_");
  }
  try{
    const u = new URL(url);
    const filename = decodeURIComponent(u.pathname.split("/").pop() || "");
    if(filename) return "https://commons.wikimedia.org/wiki/File:" + filename.replaceAll(" ", "_");
  }catch(e){}
  return null;
}

async function getDinoImage(dinoId){
  const d = dinos[dinoId];
  if(!d) return null;

  if(d.imgOverride){
    return { url: d.imgOverride, title: "" };
  }

  const base = d.wiki || d.name;
  const queries = [
    `${base} life restoration`,
    `${base} restoration`,
    `${base} life reconstruction`,
    `${base} paleoart`,
    `${base} reconstruction`,
    `${base} model dinosaur`,
    `${base} illustration`
  ];

  for(const q of queries){
    try{
      const found = await searchCommonsImage(q);
      if(found && found.url) return found;
    }catch(e){}
  }
  return null;
}

function setCardImage(imgId, foundObj, caption){
  const img = document.getElementById(imgId);
  if(!img) return;

  if(!foundObj || !foundObj.url){
    img.style.display = "none";
    img.removeAttribute("src");
    img.dataset.full = "";
    img.dataset.source = "";
    img.dataset.caption = caption || "";
    return;
  }

  const src = foundObj.url;
  const sourcePage = commonsFilePageFromTitleOrUrl(foundObj.title, src);

  img.style.display = "block";
  img.src = src;
  img.dataset.full = src;
  img.dataset.source = sourcePage || "";
  img.dataset.caption = caption || "";

  img.onload = () => {
    const art = img.closest(".dinoArt");
    if(art) art.classList.add("hasImg");
  };
  img.onerror = () => {
    img.removeAttribute("src");
    img.style.display = "none";
    img.dataset.full = "";
    img.dataset.source = "";
  };
}

async function loadDinoCardImage(imgId, dinoId){
  const img = document.getElementById(imgId);
  if(img){
    img.style.display = "none";
    const art = img.closest(".dinoArt");
    if(art) art.classList.remove("hasImg");
  }
  const found = await getDinoImage(dinoId);
  const d = dinos[dinoId];
  setCardImage(imgId, found, d?.name || "");
}

/** ========== –õ–û–ì–ò–ö–ê –ò–ì–†–´ ========== **/
const state = {
  idx: -1,
  score: 0,
  locked: false,
  history: []
};

const mainPanel = document.getElementById("mainPanel");
const ladderEl = document.getElementById("ladder");
const scorePill = document.getElementById("scorePill");
const confettiEl = document.getElementById("confetti");

function buildLadder(){
  ladderEl.innerHTML = "";
  for(let i=1;i<=questions.length;i++){
    const li = document.createElement("li");
    li.className = "step";
    li.innerHTML = `<span class="n">#${i}</span><span>–£—Ä–æ–≤–µ–Ω—å ${i}</span><span class="egg"></span>`;
    ladderEl.appendChild(li);
  }
}

function setLadder(){
  const items = ladderEl.querySelectorAll(".step");
  items.forEach((el, i)=>{
    const level = i+1;
    const current = state.idx+1;
    el.classList.toggle("active", level === current);
    el.classList.toggle("done", level < current);
  });
}

function optionKeyFor(canMeet, winnerIsA){
  if(canMeet && winnerIsA) return "A";
  if(canMeet && !winnerIsA) return "B";
  if(!canMeet && winnerIsA) return "C";
  return "D";
}

function currentQuestion(){
  return questions[state.idx];
}

/** ========== –û–ó–í–£–ß–ö–ê + INTRO –ü–ï–†–ï–î –ö–ê–ñ–î–´–ú –í–û–ü–†–û–°–û–ú ========== **/
let introToken = 0;
let ruVoice = null;

function pickRuVoice(){
  if(!("speechSynthesis" in window)) return;
  const vs = speechSynthesis.getVoices?.() || [];
  ruVoice = vs.find(v => (v.lang || "").toLowerCase().startsWith("ru")) || null;
}
if("speechSynthesis" in window){
  pickRuVoice();
  speechSynthesis.onvoiceschanged = pickRuVoice;
}

function cancelSpeech(){
  try{ if("speechSynthesis" in window) speechSynthesis.cancel(); }catch(e){}
}

function speakRU(text){
  return new Promise(resolve => {
    if(!("speechSynthesis" in window)) return resolve();
    pickRuVoice();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = "ru-RU";
    if(ruVoice) u.voice = ruVoice;
    u.rate = 1.0;
    u.pitch = 1.0;
    u.onend = () => resolve();
    u.onerror = () => resolve();
    try{ speechSynthesis.speak(u); }catch(e){ resolve(); }
  });
}

function buildSpeakText(d){
  return `${d.name}. ${d.about} –ü–µ—Ä–∏–æ–¥: ${d.period}. –ü—Ä–∏–º–µ—Ä–Ω–æ ${d.myaFrom}‚Äì${d.myaTo} –º–∏–ª–ª–∏–æ–Ω–æ–≤ –ª–µ—Ç –Ω–∞–∑–∞–¥.`;
}

function abortIntro(){
  introToken++;
  cancelSpeech();
}

async function setIntroCard(dinoId, colors, label){
  const d = dinos[dinoId];

  const stepEl = document.getElementById("introStep");
  const nameEl = document.getElementById("introName");
  const whenEl = document.getElementById("introWhen");
  const aboutEl = document.getElementById("introAbout");
  const svgHost = document.getElementById("introSvg");
  const img = document.getElementById("introImg");
  const art = document.getElementById("introArt");

  if(stepEl) stepEl.textContent = label;
  if(nameEl) nameEl.textContent = d.name;
  if(whenEl) whenEl.textContent = `–ö–æ–≥–¥–∞ –∂–∏–ª: ${d.period} ‚Ä¢ –ø—Ä–∏–º–µ—Ä–Ω–æ ${d.myaFrom}‚Äì${d.myaTo} –º–ª–Ω –ª–µ—Ç –Ω–∞–∑–∞–¥`;
  if(aboutEl) aboutEl.textContent = d.about;

  if(svgHost) svgHost.innerHTML = svgDino(d.type, colors);

  if(art) art.classList.remove("hasImg");
  if(img){
    img.style.display = "none";
    img.removeAttribute("src");
  }

  const found = await getDinoImage(dinoId);
  if(found?.url && img){
    img.style.display = "block";
    img.src = found.url;
    await new Promise(res => { img.onload = res; img.onerror = res; });
    if(img.naturalWidth > 0 && art) art.classList.add("hasImg");
  }
}

async function runIntroSequence(q, colorsA, colorsB){
  const my = ++introToken;
  cancelSpeech();

  const introWrap = document.getElementById("introWrap");
  const qaWrap = document.getElementById("qaWrap");
  const skipBtn = document.getElementById("skipIntroBtn");

  if(!introWrap || !qaWrap || !skipBtn){
    disableAnswers(false);
    state.locked = false;
    return;
  }

  introWrap.hidden = false;
  qaWrap.hidden = true;

  disableAnswers(true);
  state.locked = true;

  skipBtn.onclick = () => {
    abortIntro();
    introWrap.hidden = true;
    qaWrap.hidden = false;
    disableAnswers(false);
    state.locked = false;
  };

  await setIntroCard(q.a, colorsA, "–î–∏–Ω–æ–∑–∞–≤—Ä 1 –∏–∑ 2");
  if(my !== introToken) return;
  await speakRU(buildSpeakText(dinos[q.a]));
  if(my !== introToken) return;

  await setIntroCard(q.b, colorsB, "–î–∏–Ω–æ–∑–∞–≤—Ä 2 –∏–∑ 2");
  if(my !== introToken) return;
  await speakRU(buildSpeakText(dinos[q.b]));
  if(my !== introToken) return;

  introWrap.hidden = true;
  qaWrap.hidden = false;
  disableAnswers(false);
  state.locked = false;
}

function renderStart(){
  scorePill.textContent = state.score;
  mainPanel.innerHTML = `
    <div class="screen">
      <div class="bigTitle">–ö—Ç–æ –≤—ã–∏–≥—Ä–∞–µ—Ç –î–ò–ù–û-–±–∏—Ç–≤—É? ü¶ñüí•ü¶ï</div>
      <p class="bigText">
        –¢–µ–±—è –∂–¥—ë—Ç <b>10</b> –≤–æ–ø—Ä–æ—Å–æ–≤. –í –∫–∞–∂–¥–æ–º ‚Äî –¥–≤–∞ –¥–∏–Ω–æ–∑–∞–≤—Ä–∞.
        –ù—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç: <b>–º–æ–≥–ª–∏ –ª–∏ –æ–Ω–∏ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è –≤–æ –≤—Ä–µ–º–µ–Ω–∏</b> –∏ <b>–∫—Ç–æ –ø–æ–±–µ–¥–∏—Ç</b>.
        –ó–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç ‚Äî <b>1 –±–∞–ª–ª</b>.
      </p>
      <div class="startRow">
        <button class="btn primary" id="startBtn">
          <span class="key">‚ñ∂</span>
          <span>
            <div class="txt">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</div>
            <div class="sub">–ì–æ—Ç–æ–≤? –ü–æ–µ—Ö–∞–ª–∏!</div>
          </span>
        </button>
        <button class="btn ghost" id="howBtn">
          <span class="key">?</span>
          <span>
            <div class="txt">–ö–∞–∫ –∏–≥—Ä–∞—Ç—å</div>
            <div class="sub">4 –≤–∞—Ä–∏–∞–Ω—Ç–∞: –º–æ–∂–µ—Ç/–Ω–µ –º–æ–∂–µ—Ç + –∫—Ç–æ –ø–æ–±–µ–¥–∏—Ç</div>
          </span>
        </button>
      </div>
      <div class="hint">–ü–æ–¥—Å–∫–∞–∑–∫–∞: –∫–∞—Ä—Ç–∏–Ω–∫–∏ –±–µ—Ä—ë–º –∏–∑ Wikimedia Commons (—Ç–æ–ª—å–∫–æ ¬´–∂–∏–≤—ã–µ¬ª —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –±–µ–∑ —Å–∫–µ–ª–µ—Ç–æ–≤; –µ—Å–ª–∏ –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ ‚Äî –±—É–¥—É—Ç –∏–∫–æ–Ω–∫–∏). –û—Ç–≤–µ—á–∞–π –∫–Ω–æ–ø–∫–∞–º–∏ –∏–ª–∏ –∫–ª–∞–≤–∏—à–∞–º–∏ <span class="kbd">A</span> <span class="kbd">B</span> <span class="kbd">C</span> <span class="kbd">D</span>.</div>
    </div>
  `;

  document.getElementById("startBtn").addEventListener("click", startGame);
  document.getElementById("howBtn").addEventListener("click", () => {
    alert("–í –∫–∞–∂–¥–æ–º –≤–æ–ø—Ä–æ—Å–µ –≤—ã–±–∏—Ä–∞–π –æ–¥–∏–Ω –∏–∑ 4 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:\n\nA ‚Äî –ú–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏, –ø–æ–±–µ–¥–∏—Ç –¥–∏–Ω–æ–∑–∞–≤—Ä —Å–ª–µ–≤–∞\nB ‚Äî –ú–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏, –ø–æ–±–µ–¥–∏—Ç –¥–∏–Ω–æ–∑–∞–≤—Ä —Å–ø—Ä–∞–≤–∞\nC ‚Äî –ù–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏, –Ω–æ –ø–æ–±–µ–¥–∏—Ç –¥–∏–Ω–æ–∑–∞–≤—Ä —Å–ª–µ–≤–∞\nD ‚Äî –ù–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏, –Ω–æ –ø–æ–±–µ–¥–∏—Ç –¥–∏–Ω–æ–∑–∞–≤—Ä —Å–ø—Ä–∞–≤–∞\n\n–ó–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç ‚Äî 1 –±–∞–ª–ª.");
  });
}

function renderQuestion(){
  abortIntro();
  state.locked = true;

  const q = currentQuestion();
  const A = dinos[q.a];
  const B = dinos[q.b];

  const colorsA = colorFromName(A.name);
  const colorsB = colorFromName(B.name);

  const title = `–í–æ–ø—Ä–æ—Å ${state.idx+1} –∏–∑ ${questions.length}`;
  const qText = `–ö—Ç–æ –ø–æ–±–µ–¥–∏—Ç –≤ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–π –±–∏—Ç–≤–µ ‚Äî –∏ –º–æ–≥–ª–∞ –ª–∏ –±–∏—Ç–≤–∞ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏?`;

  mainPanel.innerHTML = `
    <div class="panelHead">
      <div>
        <div class="qTitle">${title}</div>
        <div class="qText">${qText}</div>
      </div>
      <div class="badge">–°–Ω–∞—á–∞–ª–∞ –∑–Ω–∞–∫–æ–º–∏–º—Å—è üëá</div>
    </div>

    <div class="panelBody">

      <!-- INTRO -->
      <div class="introWrap" id="introWrap">
        <div class="introCard">
          <div class="introTop">
            <div class="introStep"><span class="bubble good" style="width:34px;height:34px">üîä</span><span id="introStep">–ó–Ω–∞–∫–æ–º–∏–º—Å—è‚Ä¶</span></div>
            <button class="btn ghost" id="skipIntroBtn" type="button" style="min-height:auto;padding:10px 12px">
              <span class="key">‚è≠</span>
              <span>
                <div class="txt">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</div>
                <div class="sub">–°—Ä–∞–∑—É –∫ –æ—Ç–≤–µ—Ç–∞–º</div>
              </span>
            </button>
          </div>
          <div class="introContent">
            <div class="introArt" id="introArt" aria-hidden="true">
              <div class="shine"></div>
              <img class="dinoImg" id="introImg" alt="–ö–∞—Ä—Ç–∏–Ω–∫–∞ –¥–∏–Ω–æ–∑–∞–≤—Ä–∞" loading="lazy" decoding="async"/>
              <div id="introSvg"></div>
            </div>
            <div>
              <div class="introName" id="introName"></div>
              <div class="introWhen" id="introWhen"></div>
              <div class="introAbout" id="introAbout"></div>
              <div class="hint">–ï—Å–ª–∏ –∑–≤—É–∫ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è ‚Äî –Ω–∞–∂–º–∏ ¬´–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å¬ª, –∞ –ø–æ—Ç–æ–º —Å–Ω–æ–≤–∞ ¬´–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ¬ª (–±—Ä–∞—É–∑–µ—Ä—ã –∏–Ω–æ–≥–¥–∞ —Ç—Ä–µ–±—É—é—Ç –∫–ª–∏–∫–∞).</div>
            </div>
          </div>
        </div>
      </div>

      <!-- QA -->
      <div id="qaWrap" hidden>
        <div class="dinos" aria-label="–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∏–Ω–æ–∑–∞–≤—Ä–æ–≤">
          <article class="dinoCard" id="cardA">
            <div class="top">
              <div class="dinoArt" aria-hidden="true">
                <div class="shine"></div>
                <button class="zoomBtn" type="button" aria-label="–£–≤–µ–ª–∏—á–∏—Ç—å">üîç</button>
                <img class="dinoImg" id="imgA" alt="–ö–∞—Ä—Ç–∏–Ω–∫–∞: ${A.name}" loading="lazy" decoding="async"/>
                ${svgDino(A.type, colorsA)}
              </div>
              <div class="dinoMeta">
                <div class="name">${A.name}</div>
                <div class="when"><span>–ö–æ–≥–¥–∞ –∂–∏–ª:</span> ${A.period} ‚Ä¢ –ø—Ä–∏–º–µ—Ä–Ω–æ ${A.myaFrom}‚Äì${A.myaTo} –º–ª–Ω –ª–µ—Ç –Ω–∞–∑–∞–¥</div>
              </div>
            </div>
            <div class="bottom">
              ${A.tags.map(t => `<span class="tag"><span class="dot" style="background:${colorsA.spot}"></span>${t}</span>`).join("")}
              <div class="bio">${A.about}</div>
            </div>
          </article>

          <div class="vs" aria-hidden="true">VS</div>

          <article class="dinoCard" id="cardB">
            <div class="top">
              <div class="dinoArt" aria-hidden="true">
                <div class="shine"></div>
                <button class="zoomBtn" type="button" aria-label="–£–≤–µ–ª–∏—á–∏—Ç—å">üîç</button>
                <img class="dinoImg" id="imgB" alt="–ö–∞—Ä—Ç–∏–Ω–∫–∞: ${B.name}" loading="lazy" decoding="async"/>
                ${svgDino(B.type, colorsB)}
              </div>
              <div class="dinoMeta">
                <div class="name">${B.name}</div>
                <div class="when"><span>–ö–æ–≥–¥–∞ –∂–∏–ª:</span> ${B.period} ‚Ä¢ –ø—Ä–∏–º–µ—Ä–Ω–æ ${B.myaFrom}‚Äì${B.myaTo} –º–ª–Ω –ª–µ—Ç –Ω–∞–∑–∞–¥</div>
              </div>
            </div>
            <div class="bottom">
              ${B.tags.map(t => `<span class="tag"><span class="dot" style="background:${colorsB.spot}"></span>${t}</span>`).join("")}
              <div class="bio">${B.about}</div>
            </div>
          </article>
        </div>

        <div class="answers" role="group" aria-label="–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–∞">
          ${renderAnswerButtons(A.name, B.name)}
        </div>

        <div class="feedback" id="feedback" aria-live="polite"></div>

        <div class="actions">
          <button class="btn ghost" id="restartBtn">
            <span class="key">‚Ü∫</span>
            <span>
              <div class="txt">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</div>
              <div class="sub">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</div>
            </span>
          </button>

          <button class="btn primary" id="nextBtn" disabled>
            <span class="key">‚Üí</span>
            <span>
              <div class="txt">–î–∞–ª—å—à–µ</div>
              <div class="sub">–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å</div>
            </span>
          </button>
        </div>
      </div>

    </div>
  `;

  document.getElementById("restartBtn").addEventListener("click", resetGame);
  document.getElementById("nextBtn").addEventListener("click", nextQuestion);

  for(const key of ["A","B","C","D"]){
    document.getElementById(`btn${key}`).addEventListener("click", () => pick(key));
  }

  setLadder();
  scorePill.textContent = state.score;

  loadDinoCardImage("imgA", q.a);
  loadDinoCardImage("imgB", q.b);
  attachZoomHandlers();

  // –∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –¥–∏–Ω–æ–∑–∞–≤—Ä 1 (—Ñ–æ—Ç–æ+–æ–∑–≤—É—á–∫–∞) -> –¥–∏–Ω–æ–∑–∞–≤—Ä 2 -> –ø–æ—Ç–æ–º –æ—Ç–≤–µ—Ç—ã
  runIntroSequence(q, colorsA, colorsB);
}

function renderAnswerButtons(nameA, nameB){
  const mk = (key, title, sub) => `
    <button class="btn" id="btn${key}">
      <span class="key">${key}</span>
      <span>
        <div class="txt">${title}</div>
        <div class="sub">${sub}</div>
      </span>
    </button>
  `;

  return [
    mk("A", `–ú–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –ø–æ–±–µ–¥–∏—Ç ${nameA}`, "–û–Ω–∏ –∂–∏–ª–∏ –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ –æ–¥–Ω–æ –≤—Ä–µ–º—è, –∏ –ª–µ–≤—ã–π –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç"),
    mk("B", `–ú–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –ø–æ–±–µ–¥–∏—Ç ${nameB}`, "–û–Ω–∏ –∂–∏–ª–∏ –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ –æ–¥–Ω–æ –≤—Ä–µ–º—è, –∏ –ø—Ä–∞–≤—ã–π –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç"),
    mk("C", `–ù–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –ø–æ–±–µ–¥–∏—Ç ${nameA}`, "–ñ–∏–ª–∏ –≤ —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–æ –≤ —Ñ–∞–Ω—Ç–∞–∑–∏–∏ –ª–µ–≤—ã–π –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç"),
    mk("D", `–ù–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –ø–æ–±–µ–¥–∏—Ç ${nameB}`, "–ñ–∏–ª–∏ –≤ —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–æ –≤ —Ñ–∞–Ω—Ç–∞–∑–∏–∏ –ø—Ä–∞–≤—ã–π –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç"),
  ].join("");
}

function disableAnswers(disabled=true){
  for(const key of ["A","B","C","D"]){
    const b = document.getElementById(`btn${key}`);
    if(b) b.disabled = disabled;
  }
}

function pick(key){
  if(state.locked) return;
  state.locked = true;

  const q = currentQuestion();
  const A = dinos[q.a];
  const B = dinos[q.b];

  const winnerIsA = q.winner === q.a;
  const correctKey = optionKeyFor(q.canMeet, winnerIsA);

  const isCorrect = key === correctKey;
  if(isCorrect){
    state.score += 1;
    popConfetti();
  }

  state.history.push({
    qIdx: state.idx,
    pickedKey: key,
    correctKey,
    isCorrect
  });

  disableAnswers(true);
  for(const k of ["A","B","C","D"]){
    const btn = document.getElementById(`btn${k}`);
    btn.classList.remove("good","bad");
  }
  document.getElementById(`btn${correctKey}`).classList.add("good");
  if(!isCorrect) document.getElementById(`btn${key}`).classList.add("bad");

  const fb = document.getElementById("feedback");
  const icon = isCorrect ? "‚úÖ" : "‚ùå";
  fb.className = "feedback show";

  const correctText = explainOptionText(correctKey, A.name, B.name);
  const timeOverlap = rangesOverlap(A.myaFrom, A.myaTo, B.myaFrom, B.myaTo);
  const timeNote = q.canMeet
    ? `–ü–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–Ω–∏ <b>–º–æ–≥–ª–∏</b> —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. (–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤: ${timeOverlap ? "–¥–∞" : "–Ω–µ —Ç–æ—á–Ω–æ"}, –Ω–æ –≤ –∏–≥—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º ¬´–º–æ–≥–ª–∏¬ª.)`
    : `–ü–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–Ω–∏ <b>–Ω–µ –º–æ–≥–ª–∏</b> –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è: –∂–∏–ª–∏ –≤ —Ä–∞–∑–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞.`;

  fb.innerHTML = `
    <div class="line1">
      <span class="bubble ${isCorrect ? "good" : "bad"}">${icon}</span>
      <span>${isCorrect ? "–í–µ—Ä–Ω–æ! +1 –±–∞–ª–ª" : "–ü–æ—á—Ç–∏! –ë–∞–ª–ª –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω"}</span>
    </div>
    <div class="explain">
      ${timeNote}<br><br>
      <b>–ß—Ç–æ –±—ã–ª–æ –±—ã –≤ –±–∏—Ç–≤–µ:</b> ${q.story}
    </div>
    <div class="correct"><b>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:</b> ${correctKey} ‚Äî ${correctText}</div>
  `;

  scorePill.textContent = state.score;
  document.getElementById("nextBtn").disabled = false;
  setLadder();
}

function explainOptionText(key, nameA, nameB){
  const map = {
    "A": `–ú–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –ø–æ–±–µ–¥–∏—Ç ${nameA}`,
    "B": `–ú–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –ø–æ–±–µ–¥–∏—Ç ${nameB}`,
    "C": `–ù–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –ø–æ–±–µ–¥–∏—Ç ${nameA}`,
    "D": `–ù–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –ø–æ–±–µ–¥–∏—Ç ${nameB}`,
  };
  return map[key];
}

function nextQuestion(){
  if(state.idx >= questions.length - 1){
    renderEnd();
    return;
  }
  state.idx += 1;
  renderQuestion();
}

function startGame(){
  abortIntro();
  state.idx = 0;
  state.score = 0;
  state.locked = false;
  state.history = [];
  buildLadder();
  renderQuestion();
}

function resetGame(){
  abortIntro();
  state.idx = -1;
  state.score = 0;
  state.locked = false;
  state.history = [];
  buildLadder();
  setLadder();
  renderStart();
}

function gradeText(score){
  if(score === 10) return "–õ–ï–ì–ï–ù–î–ê –ü–ê–†–ö–ê –Æ–†–°–ö–û–ì–û! üèÜ –¢—ã –æ—Ç–≤–µ—Ç–∏–ª(–∞) –Ω–∞ –≤—Å—ë –∏–¥–µ–∞–ª—å–Ω–æ.";
  if(score === 9) return "–¢—ã —Å—É–ø–µ—Ä –¥–∏–Ω–æ–∑–∞–≤—Ä-—ç–∫—Å–ø–µ—Ä—Ç! ü¶ñ‚ú® –û—Å—Ç–∞–ª—Å—è –≤—Å–µ–≥–æ –æ–¥–∏–Ω —à–∞–≥ –¥–æ –ª–µ–≥–µ–Ω–¥—ã.";
  if(score >= 7) return "–û—Ç–ª–∏—á–Ω–æ! üß† –ü–æ—á—Ç–∏ –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–π –ø–∞–ª–µ–æ–Ω—Ç–æ–ª–æ–≥.";
  if(score >= 4) return "–•–æ—Ä–æ—à–∏–π —Å—Ç–∞—Ä—Ç! üëç –ï—â—ë —á—É—Ç—å-—á—É—Ç—å ‚Äî –∏ –±—É–¥–µ—à—å –ø—Ä–æ—Ñ–∏.";
  return "–¢–µ–±–µ –µ—â—ë –º–Ω–æ–≥–æ–µ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —É–∑–Ω–∞—Ç—å –æ –¥–∏–Ω–æ–∑–∞–≤—Ä–∞—Ö üß© ‚Äî –∏ —ç—Ç–æ –æ—á–µ–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ!";
}

function renderEnd(){
  abortIntro();
  scorePill.textContent = state.score;

  const review = state.history.map(h => {
    const q = questions[h.qIdx];
    const A = dinos[q.a];
    const B = dinos[q.b];
    const picked = explainOptionText(h.pickedKey, A.name, B.name);
    const correct = explainOptionText(h.correctKey, A.name, B.name);
    return `
      <details ${h.isCorrect ? "" : "open"}>
        <summary>–í–æ–ø—Ä–æ—Å ${h.qIdx+1}: ${A.name} vs ${B.name} ‚Äî ${h.isCorrect ? "‚úÖ –≤–µ—Ä–Ω–æ" : "‚ùå –Ω–µ–≤–µ—Ä–Ω–æ"}</summary>
        <div class="reviewItem">
          <b>–¢–≤–æ–π –æ—Ç–≤–µ—Ç:</b> ${h.pickedKey} ‚Äî ${picked}<br>
          <b>–ü—Ä–∞–≤–∏–ª—å–Ω–æ:</b> ${h.correctKey} ‚Äî ${correct}<br><br>
          <b>–ö–æ—Ä–æ—Ç–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è:</b> ${q.story}
        </div>
      </details>
    `;
  }).join("");

  mainPanel.innerHTML = `
    <div class="screen">
      <div class="bigTitle">–§–∏–Ω–∏—à! üéâ</div>
      <p class="bigText">
        –¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <b>${state.score} / 10</b><br>
        <b>${gradeText(state.score)}</b>
      </p>

      <div class="startRow">
        <button class="btn primary" id="playAgainBtn">
          <span class="key">‚Ü∫</span>
          <span>
            <div class="txt">–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑</div>
            <div class="sub">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –Ω–∞—á–∞–ª—É</div>
          </span>
        </button>
        <button class="btn ghost" id="shareBtn">
          <span class="key">‚òÖ</span>
          <span>
            <div class="txt">–°–æ–≤–µ—Ç</div>
            <div class="sub">–ö–∞–∫ —Å—Ç–∞—Ç—å –µ—â—ë –ª—É—á—à–µ</div>
          </span>
        </button>
      </div>

      <div class="summary">
        <details>
          <summary>–ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞–∑–±–æ—Ä –≤—Å–µ—Ö 10 –≤–æ–ø—Ä–æ—Å–æ–≤</summary>
          ${review}
        </details>
      </div>

      <p class="hint">–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å <b>–µ—â—ë 10 –Ω–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤</b> –∏ –¥–æ–±–∞–≤–∏—Ç—å ¬´–ø–æ–¥—Å–∫–∞–∑–∫–∏¬ª –∫–∞–∫ –≤ ¬´–º–∏–ª–ª–∏–æ–Ω–µ—Ä–µ¬ª (50/50, –ø–æ–º–æ—â—å –¥—Ä—É–≥–∞-–ø–∞–ª–µ–æ–Ω—Ç–æ–ª–æ–≥–∞ –∏ —Ç.–¥.).</p>
    </div>
  `;

  document.getElementById("playAgainBtn").addEventListener("click", resetGame);
  document.getElementById("shareBtn").addEventListener("click", () => {
    alert("–ß—Ç–æ–±—ã —Å—Ç–∞—Ç—å –¥–∏–Ω–æ–∑–∞–≤—Ä-—ç–∫—Å–ø–µ—Ä—Ç–æ–º:\n‚Ä¢ –∑–∞–ø–æ–º–∏–Ω–∞–π –ø–µ—Ä–∏–æ–¥—ã (—é—Ä–∞/–º–µ–ª) –∏ –º–∏–ª–ª–∏–æ–Ω—ã –ª–µ—Ç –Ω–∞–∑–∞–¥\n‚Ä¢ –æ—Ç–ª–∏—á–∞–π —Ç—Ä–∞–≤–æ—è–¥–Ω—ã—Ö –æ—Ç —Ö–∏—â–Ω–∏–∫–æ–≤\n‚Ä¢ —Å–º–æ—Ç—Ä–∏ –Ω–∞ –∑–∞—â–∏—Ç—É (–±—Ä–æ–Ω—è/—Ä–æ–≥–∞/—à–∏–ø—ã) –∏ —Ä–∞–∑–º–µ—Ä\n\n–•–æ—á–µ—à—å —Å–ª–µ–¥—É—é—â–∏–π –Ω–∞–±–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤?");
  });

  setLadder();
}

/** ========== –≠–§–§–ï–ö–¢–´ ========== **/
function popConfetti(){
  confettiEl.innerHTML = "";
  confettiEl.classList.add("show");
  const w = window.innerWidth;
  const pieces = 22;
  for(let i=0;i<pieces;i++){
    const p = document.createElement("div");
    p.className = "piece";
    const left = Math.random() * w;
    const delay = Math.random() * 0.08;
    const h = Math.floor(Math.random()*360);
    p.style.left = left + "px";
    p.style.top = (-20 - Math.random()*80) + "px";
    p.style.background = `hsl(${h} 85% 60%)`;
    p.style.animationDelay = delay + "s";
    p.style.transform = `rotate(${Math.random()*180}deg)`;
    confettiEl.appendChild(p);
  }
  setTimeout(() => confettiEl.classList.remove("show"), 1250);
}

/** ========== LIGHTBOX (–£–í–ï–õ–ò–ß–ï–ù–ò–ï –ö–ê–†–¢–ò–ù–ö–ò) ========== **/
const lb = document.getElementById("lightbox");
const lbImg = document.getElementById("lightboxImg");
const lbTitle = document.getElementById("lightboxTitle");
const lbCaption = document.getElementById("lightboxCaption");
const lbSource = document.getElementById("lightboxSource");
const lbClose = document.getElementById("lightboxClose");

function openLightbox(src, caption, sourceUrl){
  if(!src || !lb) return;
  lb.classList.add("show");
  lb.setAttribute("aria-hidden", "false");
  lbImg.src = src;
  lbTitle.textContent = caption ? `–ö–∞—Ä—Ç–∏–Ω–∫–∞: ${caption}` : "–ö–∞—Ä—Ç–∏–Ω–∫–∞";
  lbCaption.textContent = caption ? caption : "";

  if(sourceUrl){
    lbSource.href = sourceUrl;
    lbSource.style.display = "inline";
  }else{
    lbSource.style.display = "none";
    lbSource.href = "#";
  }
}

function closeLightbox(){
  if(!lb) return;
  lb.classList.remove("show");
  lb.setAttribute("aria-hidden", "true");
  setTimeout(()=>{ lbImg.removeAttribute("src"); }, 60);
}

lbClose?.addEventListener("click", closeLightbox);
lb?.addEventListener("click", (e)=>{
  if(e.target === lb) closeLightbox();
});
window.addEventListener("keydown", (e)=>{
  if(e.key === "Escape" && lb?.classList.contains("show")) closeLightbox();
});

function attachZoomHandlers(){
  const imgA = document.getElementById("imgA");
  const imgB = document.getElementById("imgB");
  const artA = imgA?.closest(".dinoArt");
  const artB = imgB?.closest(".dinoArt");

  const bind = (img, art) => {
    if(!art) return;

    art.style.cursor = "pointer";
    art.title = "–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ";

    art.onclick = (ev) => {
      const isZoomBtn = (ev.target && ev.target.classList && ev.target.classList.contains("zoomBtn"));
      if(isZoomBtn) return;

      const src = img?.dataset?.full || img?.src || "";
      if(!src) return;
      window.open(src, "_blank", "noopener,noreferrer");
    };

    const zoomBtn = art.querySelector(".zoomBtn");
    if(zoomBtn){
      zoomBtn.onclick = (ev) => {
        ev.preventDefault();
        ev.stopPropagation();
        const src = img?.dataset?.full || img?.src || "";
        const caption = img?.dataset?.caption || "";
        const source = img?.dataset?.source || "";
        if(src) openLightbox(src, caption, source);
      };
    }
  };

  bind(imgA, artA);
  bind(imgB, artB);
}

/** ========== –ö–õ–ê–í–ò–ê–¢–£–†–ê ========== **/
window.addEventListener("keydown", (e)=>{
  const k = (e.key || "").toUpperCase();
  if(["A","B","C","D"].includes(k)){
    const btn = document.getElementById(`btn${k}`);
    if(btn && !btn.disabled) btn.click();
  }
  if(k === "ENTER"){
    const next = document.getElementById("nextBtn");
    if(next && !next.disabled) next.click();
  }
});

/** ========== –°–¢–ê–†–¢ ========== **/
buildLadder();
setLadder();
renderStart();
</script>

</body>
</html>
